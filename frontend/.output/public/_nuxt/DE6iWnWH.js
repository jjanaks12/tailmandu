import{_ as E}from"./CO-fVa-8.js";import{_ as F}from"./CYqblDeG.js";import{a as H,b as L,c as P,_ as U}from"./CrtRcncb.js";import{e as g,l as D,E as C,c as u,o as n,b as c,a as _,h as I,w as m,g as e,i as q,d as N,t as k,v as f,y as Z,N as R,z as G,s as J,A as K,r as A,q as O,Z as Q,F as V,x as W,f as B}from"./BWYtlrHP.js";import{t as X,a as ee}from"./CPYLdFy8.js";import{a as te}from"./IQQXW68s.js";import{u as se}from"./pvFOUAvB.js";import{R as ae}from"./fkC6Eo9m.js";import{T as re}from"./Dy3Ezw8N.js";import"./BSfqQtg2.js";import"./DHK_nE_D.js";import"./DkQOv5sH.js";const ne={class:"text-center space-y-2"},oe={class:"block"},le={class:"not-italic text-3xl text-black block"},ie={key:0,class:"block"},ce=g({__name:"Runner",props:{runner:{},timer:{},stageId:{}},emits:["update"],setup(o,{emit:l}){const t=l,s=o,{axios:v}=D(),p=C(()=>[s.runner.personal.first_name,s.runner.personal.middle_name,s.runner.personal.last_name].join(" ")),d=async()=>{s.timer==null&&(await v.post(`/volunteers/${s.stageId}/log_timer/${s.runner.id}`),t("update"))};return(a,$)=>{const b=H,w=L,h=U;return n(),u("div",ne,[c(h,{class:f({"size-[120px] mx-auto border-4":!0,"border-primary":a.timer==null,"border-secondary":a.timer!==void 0}),onClick:d},{default:m(()=>[c(b,{src:e(q)(a.runner.personal?.avatar?.file_name),alt:a.runner.personal.first_name},null,8,["src","alt"]),c(w,null,{default:m(()=>[N(k(e(P)(e(p))),1)]),_:1})]),_:1},8,["class"]),_("strong",oe,k(e(p)),1),_("em",le,k(a.runner.bib),1),a.timer?(n(),u("span",ie,k(e(Z)(a.timer).format("YYYY-MM-DD HH:mm:ss")),1)):I("",!0),_("span",{class:f({flag:!0,["flag-"+a.runner.personal.country.abbr]:!0})},null,2)])}}});function T(...o){return X(ee(o))}const ue=g({__name:"Alert",props:{class:{},variant:{}},setup(o){const l=o;return(t,s)=>(n(),u("div",{"data-slot":"alert",class:f(e(T)(e(pe)({variant:t.variant}),l.class)),role:"alert"},[R(t.$slots,"default")],2))}}),de=g({__name:"AlertDescription",props:{class:{}},setup(o){const l=o;return(t,s)=>(n(),u("div",{"data-slot":"alert-description",class:f(e(T)("text-muted-foreground col-start-2 grid justify-items-start gap-1 text-sm [&_p]:leading-relaxed",l.class))},[R(t.$slots,"default")],2))}}),me=g({__name:"AlertTitle",props:{class:{}},setup(o){const l=o;return(t,s)=>(n(),u("div",{"data-slot":"alert-title",class:f(e(T)("col-start-2 line-clamp-1 min-h-4 font-medium tracking-tight",l.class))},[R(t.$slots,"default")],2))}}),pe=te("relative w-full rounded-lg border px-4 py-3 text-sm grid has-[>svg]:grid-cols-[calc(var(--spacing)*4)_1fr] grid-cols-[0_1fr] has-[>svg]:gap-x-3 gap-y-0.5 items-start [&>svg]:size-4 [&>svg]:translate-y-0.5 [&>svg]:text-current",{variants:{variant:{default:"bg-card text-card-foreground",destructive:"text-destructive bg-card [&>svg]:text-current *:data-[slot=alert-description]:text-destructive/90",info:"text-blue-800 bg-card [&>svg]:text-blue-400 *:data-[slot=alert-description]:text-blue-400"}},defaultVariants:{variant:"default"}}),_e={class:"flex justify-end items-center gap-4 pb-4 mb-14 border-b"},fe={key:0,class:"flex gap-4"},Re=g({__name:"[stage_id]",setup(o){se({title:"Volunteer"});const{axios:l}=D(),t=G(),{user:s}=J(K()),v=A([]),p=A([]),d=A(""),a=C(()=>{let r=null;for(const i of s.value?.personal?.volunteers??[])for(const x of i.checkpoints)x.stage_id==t.params.stage_id&&(r=x);return r}),$=async()=>{if(a.value){const{data:r}=await l.get(`/volunteers/checkpoints/${a.value.id}/entry`);p.value=r}},b=async()=>{const{data:r}=await l.get(`/events/stages/${t.params.stage_id}/runners`);v.value=r,$()},w=r=>p.value.find(i=>i.runner_id===r)??null,h=C(()=>v.value.filter(r=>r.bib.includes(d.value)));return O(()=>{b()}),(r,i)=>{const x=E,z=F,M=ce,S=me,Y=de,j=ue;return n(),u(V,null,[_("div",_e,[c(x,{modelValue:e(d),"onUpdate:modelValue":i[0]||(i[0]=y=>Q(d)?d.value=y:null),placeholder:"Search by BIB ID here...",class:"max-w-[280px]"},null,8,["modelValue"]),c(z,{type:"button",onClick:b,size:"icon",modifier:"outline"},{default:m(()=>[c(e(ae))]),_:1})]),e(h).length>0?(n(),u("div",fe,[(n(!0),u(V,null,W(e(h),y=>(n(),B(M,{timer:w(y.id)?.timer,"stage-id":e(t).params.stage_id,runner:y,class:"w-1/2 md:w-1/3 lg:w-1/4",onUpdate:$},null,8,["timer","stage-id","runner"]))),256))])):(n(),u(V,{key:1},[e(d)?(n(),B(j,{key:0,variant:"info"},{default:m(()=>[c(e(re)),c(S,{class:"text-lg"},{default:m(()=>[...i[1]||(i[1]=[N("No runners found!",-1)])]),_:1}),c(Y,null,{default:m(()=>[...i[2]||(i[2]=[_("p",null,"Please check on your search, there might be some typo.",-1)])]),_:1})]),_:1})):I("",!0)],64))],64)}}});export{Re as default};

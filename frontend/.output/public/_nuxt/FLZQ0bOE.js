import{_ as ee}from"./DFoVhR9B.js";import{u as te,_ as ae}from"./Dw4pR65e.js";import{_ as oe,a as se,b as ne,c as le,d as re,e as _e}from"./IoNy3loa.js";import{_ as ie,a as me,b as ue,c as pe}from"./JolboW3R.js";import{_ as ce}from"./CiVyOKQR.js";import{_ as fe}from"./BnE2jMX8.js";import{e as A,v as de,c as f,o as _,b as e,a as p,w as t,g as o,h as ge,d as n,t as u,f as k,l as v,a3 as ve,r as D,a8 as $e,Y as be,A as xe,a9 as we,aa as ke,s as Ce,B as ye,F as w,m as De,J as T}from"./CwoOZn_i.js";import{_ as Se,a as he,b as Me,c as Te}from"./BaxgP5Rq.js";import{_ as Ue,a as Ae,b as Be,c as Pe,d as Fe,e as Ie,f as Ne}from"./CheQ7mbu.js";import{_ as Ve,a as je}from"./DDmVDYh9.js";import{_ as Ee,a as Le,b as Re,c as He}from"./D-Fxp-qX.js";import{a as qe,F as ze}from"./BVwABNE6.js";import{_ as Oe}from"./SjCxevgj.js";import{u as Ge}from"./D6ldSpn0.js";import{S as Je}from"./BhkSePv6.js";import{S as Ye}from"./BpItL8t6.js";import{E as Ke}from"./CEJVo9bO.js";import{S as Qe}from"./B-pzF3hi.js";import"./CBfrqCZ4.js";import"./B50zHHui.js";import"./DrFvtmkD.js";import"./Ig5ouk6M.js";import"./DN0b0fZi.js";import"./C6Y-ieo6.js";import"./tFDpJnaq.js";import"./CcY35oya.js";import"./BIdMOU1N.js";import"./DsBhoPsV.js";import"./BAcqkrsA.js";import"./B28w5Cdj.js";import"./Cmm6gOyh.js";import"./ol96YsNy.js";import"./ePsW5NZK.js";import"./VVSYG-I8.js";import"./CHIgUVhi.js";import"./qjyHbzIr.js";import"./mR0KLPQM.js";import"./BKpbGE-O.js";const We={class:"flex items-center gap-2"},Xe={class:"flex-grow"},Ze={class:"not-italic block"},et=A({__name:"UserInfo",props:{user:{}},setup(d){const c=d,i=de(()=>[c.user?.personal?.first_name,c.user?.personal?.middle_name,c.user?.personal?.last_name].join(" ").trim());return(s,g)=>{const r=me,l=ue,S=ie,a=ce,C=fe;return _(),f("div",We,[e(S,{class:"w-[60px] h-[60px]"},{default:t(()=>[e(r,{src:o(ge)(s.user?.personal?.avatar?.file_name),class:"object-cover"},null,8,["src"]),e(l,null,{default:t(()=>[n(u(o(pe)(o(i))),1)]),_:1})]),_:1}),p("div",Xe,[e(a,{to:`/dashboard/users?id=${s.user.id}`,class:"hover:underline"},{default:t(()=>[n(u(o(i)),1)]),_:1},8,["to"]),p("em",Ze,u(s.user.personal?.email),1),s.user.role?(_(),k(C,{key:0,variant:"secondary"},{default:t(()=>[n(u(s.user?.role?.name),1)]),_:1})):v("",!0)])])}}}),U=ve("users",()=>{const d=D([]),{isLoading:c,params:i}=$e(),{axios:s}=be(),g=async()=>{const{data:{data:r,...l}}=await s.get("/users",{params:i.value});d.value=r,i.value=l,d.value=r};return xe(i,(r,l)=>{we(r,l)||g()}),{users:d,isLoading:c,params:i,fetch:g}}),tt={class:"flex gap-4 mb-20"},at={class:"flex-grow"},ot={class:"flex gap-2 mb-4"},st={key:0,class:"flex items-center justify-end space-x-2 py-4"},nt={class:"flex-1 text-sm text-muted-foreground"},lt={class:"space-x-2"},rt={key:0},Gt=A({__name:"index",setup(d){Ge({title:"Contacts"});const{public:{mailAdmin:c}}=ke(),{users:i,params:s}=Ce(U()),{fetch:g}=U();te();const r=D(!1),l=D(null);return ye(()=>{g()}),(S,a)=>{const C=ee,h=ae,$=le,M=ne,B=se,b=_e,P=et,F=he,I=Ve,N=je,V=Te,j=Ae,E=Me,L=Se,R=re,H=oe,q=Pe,z=Fe,O=Ie,G=Ne,J=Be,Y=Ue,K=Re,Q=He,W=Le,X=Ee;return _(),f(w,null,[p("div",tt,[p("div",at,[p("div",ot,[e(o(Je)),a[3]||(a[3]=n(" Filters ",-1))])]),e(o(ze),{class:"max-w-[320px] w-full flex items-center gap-2"},{default:t(()=>[e(o(qe),{name:"search"},{default:t(({field:m})=>[e(C,De(m,{placeholder:"Search users"}),null,16)]),_:1}),e(h,{variant:"secondary",size:"lg"},{default:t(()=>[e(o(Ye))]),_:1})]),_:1})]),e(H,null,{default:t(()=>[e(B,null,{default:t(()=>[e(M,null,{default:t(()=>[e($,null,{default:t(()=>[...a[4]||(a[4]=[n("SN",-1)])]),_:1}),e($,null,{default:t(()=>[...a[5]||(a[5]=[n("User",-1)])]),_:1}),e($,null,{default:t(()=>[...a[6]||(a[6]=[n("Status",-1)])]),_:1}),e($,{class:"text-right"},{default:t(()=>[...a[7]||(a[7]=[n("Action",-1)])]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[(_(!0),f(w,null,T(o(i),(m,y)=>(_(),k(M,null,{default:t(()=>[e(b,null,{default:t(()=>[n(u(y+1),1)]),_:2},1024),e(b,null,{default:t(()=>[e(P,{user:m},null,8,["user"])]),_:2},1024),e(b),e(b,{class:"text-right"},{default:t(()=>[m.personal.email!=o(c)?(_(),k(L,{key:0},{default:t(()=>[e(F,{"as-child":""},{default:t(()=>[e(h,{variant:"outline"},{default:t(()=>[e(o(Ke))]),_:1})]),_:1}),e(E,{class:"w-56"},{default:t(()=>[e(j,null,{default:t(()=>[e(I,null,{default:t(()=>[...a[8]||(a[8]=[n("Actions",-1)])]),_:1}),e(N),e(V,{onClick:()=>{r.value=!0,l.value=m}},{default:t(()=>[e(o(Qe)),a[9]||(a[9]=p("span",null,"Change role",-1))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),o(s).total_page>1?(_(),f("div",st,[p("div",nt,u(o(s)?.current)+" of "+u(o(s)?.total_page)+" pages ",1),p("div",lt,[e(Y,{"items-per-page":o(s).per_page,total:o(s).total,"default-page":o(s).current,"onUpdate:page":a[0]||(a[0]=m=>{s.value={...o(s),current:m}})},{default:t(({page:m})=>[e(J,null,{default:t(({items:y})=>[e(q),(_(!0),f(w,null,T(y,(x,Z)=>(_(),f(w,{key:Z},[x.type==="page"?(_(),k(z,{key:0,value:x.value,"is-active":x.value===m},{default:t(()=>[n(u(x.value),1)]),_:2},1032,["value","is-active"])):v("",!0)],64))),128)),e(O,{index:4}),e(G)]),_:2},1024)]),_:1},8,["items-per-page","total","default-page"])])])):v("",!0),e(X,{open:o(r),"onUpdate:open":a[2]||(a[2]=()=>{r.value=!1,l.value=null})},{default:t(()=>[e(W,{class:"bg-white"},{default:t(()=>[e(K,null,{default:t(()=>[a[10]||(a[10]=n(" Update ",-1)),o(l)?.personal?.first_name?(_(),f("span",rt,u(o(l)?.personal?.first_name)+"'s",1)):v("",!0),a[11]||(a[11]=n(" role ",-1))]),_:1}),e(Q,null,{default:t(()=>[...a[12]||(a[12]=[n("Change role of users",-1)])]),_:1}),e(Oe,{user:o(l),onUpdate:a[1]||(a[1]=()=>{r.value=!1,l.value=null,o(g)()})},null,8,["user"])]),_:1})]),_:1},8,["open"])],64)}}});export{Gt as default};

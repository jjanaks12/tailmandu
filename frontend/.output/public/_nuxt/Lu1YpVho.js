import{_ as B,a as C,b as E,c as L,d as N}from"./CHnIA0z0.js";import{_ as R}from"./C5kvzf0a.js";import{a as d,E as U,F as T}from"./DJ8eIciF.js";import{a as D}from"./CQ3lKrei.js";import{e as I,r as u,a6 as _,s as M,l as j,f as r,w as s,g as e,o as n,b as a,a as q,c as z,F as A,x as G,d as f,t as H,h as J}from"./qg68g3Ym.js";import{L as K}from"./B7XZuiwR.js";const O={class:"text-right"},ee=I({__name:"roleForm",props:{user:{}},emits:["update"],setup(p,{emit:v}){const i=p,l=u(),g=v,{assignUserRole:h}=_(),{roles:S}=M(_()),o=u(!1),V=async t=>{o.value=!0,console.log(t),await h(t),o.value=!1,g("update")};return j(()=>{l.value&&l.value.setValues({user_id:i.user?.id,role_id:i.user?.role?.id})}),(t,c)=>{const b=E,x=C,y=N,F=L,$=B,k=R;return n(),r(e(T),{"validation-schema":e(D),onSubmit:V,class:"flex flex-col gap-4",ref_key:"form",ref:l},{default:s(()=>[a(e(d),{type:"hidden",name:"user_id",value:t.user?.id},null,8,["value"]),a(e(d),{name:"role_id"},{default:s(({handleChange:w})=>[a($,{"onUpdate:modelValue":w,"default-value":t.user?.role?.id},{default:s(()=>[a(x,null,{default:s(()=>[a(b,{placeholder:"Change role"})]),_:1}),a(F,null,{default:s(()=>[(n(!0),z(A,null,G(e(S),m=>(n(),r(y,{value:m.id},{default:s(()=>[f(H(m.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:2},1032,["onUpdate:modelValue","default-value"]),a(e(U),{name:"role_id"})]),_:1}),q("div",O,[a(k,{variant:"secondary",type:"submit",class:"w-[180px]",disabled:e(o)},{default:s(()=>[e(o)?(n(),r(e(K),{key:0,class:"animate-spin relative"})):J("",!0),c[0]||(c[0]=f(" Update details ",-1))]),_:1},8,["disabled"])])]),_:1},8,["validation-schema"])}}});export{ee as _};

import{m as y,h as g,n as v}from"./VQ-eN-oM.js";import{m as A}from"./CMjavVp8.js";function T(e){const t=y("",1e3);return{search:t,handleTypeaheadSearch:(c,i)=>{t.value=t.value+c;{const s=g(),l=i.map(n=>{var m,p;return{...n,textValue:((m=n.value)==null?void 0:m.textValue)??((p=n.ref.textContent)==null?void 0:p.trim())??""}}),r=l.find(n=>n.ref===s),o=l.map(n=>n.textValue),x=E(o,t.value,r==null?void 0:r.textValue),u=l.find(n=>n.textValue===x);return u&&u.ref.focus(),u==null?void 0:u.ref}},resetTypeahead:()=>{t.value=""}}}function b(e,t){return e.map((a,d)=>e[(t+d)%e.length])}function E(e,t,a){const c=t.length>1&&Array.from(t).every(o=>o===t[0])?t[0]:t,i=a?e.indexOf(a):-1;let s=b(e,Math.max(i,0));c.length===1&&(s=s.filter(o=>o!==a));const r=s.find(o=>o.toLowerCase().startsWith(c.toLowerCase()));return r!==a?r:void 0}let f=0;function S(){A(e=>{if(!v)return;const t=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",t[0]??h()),document.body.insertAdjacentElement("beforeend",t[1]??h()),f++,e(()=>{f===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(a=>a.remove()),f--})})}function h(){const e=document.createElement("span");return e.setAttribute("data-reka-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}export{T as a,S as u};

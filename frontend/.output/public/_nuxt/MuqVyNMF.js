import{c as T}from"./BDnat4bi.js";import{U as y,aM as C,aN as w,aG as I,E as P,aO as U,r as v,V as A,ac as b,T as S,e as x,I as _,Q as F}from"./qg68g3Ym.js";import{r as R}from"./CZ-43qDQ.js";import{d as $,i as k,e as j}from"./K4mxSTIr.js";function Q(){let t=document.activeElement;if(t==null)return null;for(;t!=null&&t.shadowRoot!=null&&t.shadowRoot.activeElement!=null;)t=t.shadowRoot.activeElement;return t}const[Y,J]=T("ConfigProvider");function D(t){const e=y(),s=e?.type.emits,i={};return s?.length||console.warn(`No emitted event found. Please check component: ${e?.type.__name}`),s?.forEach(u=>{i[C(w(u))]=(...o)=>t(u,...o)}),i}function L(t){const e=y(),s=Object.keys(e?.type.props??{}).reduce((u,o)=>{const n=(e?.type.props[o]).default;return n!==void 0&&(u[o]=n),u},{}),i=I(t);return P(()=>{const u={},o=e?.vnode.props??{};return Object.keys(o).forEach(n=>{u[w(n)]=o[n]}),Object.keys({...s,...u}).reduce((n,l)=>(i.value[l]!==void 0&&(n[l]=i.value[l]),n),{})})}function X(t,e){const s=L(t),i=e?D(e):{};return P(()=>({...s.value,...i}))}function Z(t,e="reka"){return t||`${e}-${U?.()}`}function V(t,e){const s=v(t);function i(o){return e[s.value][o]??s.value}return{state:s,dispatch:o=>{s.value=i(o)}}}function W(t,e){const s=v({}),i=v("none"),u=v(t),o=t.value?"mounted":"unmounted";let n;const l=e.value?.ownerDocument.defaultView??$,{state:d,dispatch:c}=V(o,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}}),r=a=>{if(k){const m=new CustomEvent(a,{bubbles:!1,cancelable:!1});e.value?.dispatchEvent(m)}};A(t,async(a,m)=>{const N=m!==a;if(await S(),N){const E=i.value,f=h(e.value);a?(c("MOUNT"),r("enter"),f==="none"&&r("after-enter")):f==="none"||f==="undefined"||s.value?.display==="none"?(c("UNMOUNT"),r("leave"),r("after-leave")):m&&E!==f?(c("ANIMATION_OUT"),r("leave")):(c("UNMOUNT"),r("after-leave"))}},{immediate:!0});const p=a=>{const m=h(e.value),N=m.includes(a.animationName),E=d.value==="mounted"?"enter":"leave";if(a.target===e.value&&N&&(r(`after-${E}`),c("ANIMATION_END"),!u.value)){const f=e.value.style.animationFillMode;e.value.style.animationFillMode="forwards",n=l?.setTimeout(()=>{e.value?.style.animationFillMode==="forwards"&&(e.value.style.animationFillMode=f)})}a.target===e.value&&m==="none"&&c("ANIMATION_END")},g=a=>{a.target===e.value&&(i.value=h(e.value))},M=A(e,(a,m)=>{a?(s.value=getComputedStyle(a),a.addEventListener("animationstart",g),a.addEventListener("animationcancel",p),a.addEventListener("animationend",p)):(c("ANIMATION_END"),n!==void 0&&l?.clearTimeout(n),m?.removeEventListener("animationstart",g),m?.removeEventListener("animationcancel",p),m?.removeEventListener("animationend",p))},{immediate:!0}),O=A(d,()=>{const a=h(e.value);i.value=d.value==="mounted"?a:"none"});return b(()=>{M(),O()}),{isPresent:P(()=>["mounted","unmountSuspended"].includes(d.value))}}function h(t){return t&&getComputedStyle(t).animationName||"none"}var ee=x({name:"Presence",props:{present:{type:Boolean,required:!0},forceMount:{type:Boolean}},slots:{},setup(t,{slots:e,expose:s}){const{present:i,forceMount:u}=_(t),o=v(),{isPresent:n}=W(i,o);s({present:n});let l=e.default({present:n.value});l=R(l||[]);const d=y();if(l&&l?.length>1){const c=d?.parent?.type.name?`<${d.parent.type.name} />`:"component";throw new Error([`Detected an invalid children for \`${c}\` for  \`Presence\` component.`,"","Note: Presence works similarly to `v-if` directly, but it waits for animation/transition to finished before unmounting. So it expect only one direct child of valid VNode type.","You can apply a few solutions:",["Provide a single child element so that `presence` directive attach correctly.","Ensure the first child is an actual element instead of a raw text node or comment node."].map(r=>`  - ${r}`).join(`
`)].join(`
`))}return()=>u.value||i.value||n.value?F(e.default({present:n.value})[0],{ref:c=>{const r=j(c);return typeof r?.hasAttribute>"u"||(r?.hasAttribute("data-reka-popper-content-wrapper")?o.value=r.firstElementChild:o.value=r),r}}):null}});export{ee as P,X as a,L as b,D as c,Q as g,Y as i,Z as u};

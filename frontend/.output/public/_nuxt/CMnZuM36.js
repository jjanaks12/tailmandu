import{_ as ee}from"./CO-fVa-8.js";import{u as te,_ as oe}from"./CYqblDeG.js";import{_ as se,a as ae,b as ne,c as le,d as re,e as ie}from"./BQUvdYOr.js";import{_ as _e,a as me,b as ue,c as pe}from"./CrtRcncb.js";import{_ as ce}from"./BrOwYJSO.js";import{_ as fe}from"./BjuGCfxb.js";import{e as A,E as de,c as f,o as i,b as e,a as p,w as t,g as s,i as ge,d as n,t as u,f as k,h as v,I as ve,r as D,J as $e,l as be,K as xe,L as we,a9 as ke,s as Ce,q as ye,F as w,n as De,x as T}from"./BWYtlrHP.js";import{_ as Se,a as he,b as Me,c as Te}from"./M4Y8NSUf.js";import{_ as Ue,a as Ae,b as Ie}from"./BSG83ekJ.js";import{_ as Pe,a as Be,b as Fe,c as Ne,d as Ee,e as Ve}from"./B2mN432x.js";import{_ as je,a as Le,b as Re,c as qe}from"./BuH3ov0T.js";import{a as He,F as ze}from"./CwtqrsYf.js";import{_ as Oe}from"./DlzpGvJm.js";import{u as Ge}from"./pvFOUAvB.js";import{S as Je,E as Ke}from"./CDW7BRKf.js";import{S as Qe}from"./BjRNaxyv.js";import{S as We}from"./BQH4Lo4q.js";import"./CPYLdFy8.js";import"./IQQXW68s.js";import"./BSfqQtg2.js";import"./DHK_nE_D.js";import"./DkQOv5sH.js";import"./qK-Ygz8H.js";import"./MmWKOBWl.js";import"./CsGHxWZ1.js";import"./C6Y-ieo6.js";import"./D5ct0Dmc.js";import"./C7MXhZiL.js";import"./Bs1c9Rm5.js";import"./k7q4IQQ5.js";import"./CeBvLeEG.js";import"./C5gjHF55.js";import"./DRhRLM69.js";import"./CqZ6nps_.js";import"./VAG_O_SR.js";import"./DjqI5AnR.js";import"./BuMKhjKc.js";import"./LkxdYki6.js";const Xe={class:"flex items-center gap-2"},Ye={class:"flex-grow"},Ze={class:"not-italic block"},et=A({__name:"UserInfo",props:{user:{}},setup(d){const c=d,_=de(()=>[c.user?.personal?.first_name,c.user?.personal?.middle_name,c.user?.personal?.last_name].join(" ").trim());return(a,g)=>{const r=me,l=ue,S=_e,o=ce,C=fe;return i(),f("div",Xe,[e(S,{class:"w-[60px] h-[60px]"},{default:t(()=>[e(r,{src:s(ge)(a.user?.personal?.avatar?.file_name),class:"object-cover"},null,8,["src"]),e(l,null,{default:t(()=>[n(u(s(pe)(s(_))),1)]),_:1})]),_:1}),p("div",Ye,[e(o,{to:`/dashboard/users?id=${a.user.id}`,class:"hover:underline"},{default:t(()=>[n(u(s(_)),1)]),_:1},8,["to"]),p("em",Ze,u(a.user.personal?.email),1),a.user.role?(i(),k(C,{key:0,variant:"secondary"},{default:t(()=>[n(u(a.user?.role?.name),1)]),_:1})):v("",!0)])])}}}),U=ve("users",()=>{const d=D([]),{isLoading:c,params:_}=$e(),{axios:a}=be(),g=async()=>{const{data:{data:r,...l}}=await a.get("/users",{params:_.value});d.value=r,_.value=l,d.value=r};return xe(_,(r,l)=>{we(r,l)||g()}),{users:d,isLoading:c,params:_,fetch:g}}),tt={class:"flex gap-4 mb-20"},ot={class:"flex-grow"},st={class:"flex gap-2 mb-4"},at={key:0,class:"flex items-center justify-end space-x-2 py-4"},nt={class:"flex-1 text-sm text-muted-foreground"},lt={class:"space-x-2"},rt={key:0},Gt=A({__name:"index",setup(d){Ge({title:"Contacts"});const{public:{mailAdmin:c}}=ke(),{users:_,params:a}=Ce(U()),{fetch:g}=U();te();const r=D(!1),l=D(null);return ye(()=>{g()}),(S,o)=>{const C=ee,h=oe,$=le,M=ne,I=ae,b=ie,P=et,B=he,F=Ae,N=Ie,E=Te,V=Ue,j=Me,L=Se,R=re,q=se,H=Fe,z=Ne,O=Ee,G=Ve,J=Be,K=Pe,Q=Re,W=qe,X=Le,Y=je;return i(),f(w,null,[p("div",tt,[p("div",ot,[p("div",st,[e(s(Je)),o[3]||(o[3]=n(" Filters ",-1))])]),e(s(ze),{class:"max-w-[320px] w-full flex items-center gap-2"},{default:t(()=>[e(s(He),{name:"search"},{default:t(({field:m})=>[e(C,De(m,{placeholder:"Search users"}),null,16)]),_:1}),e(h,{variant:"secondary",size:"lg"},{default:t(()=>[e(s(Qe))]),_:1})]),_:1})]),e(q,null,{default:t(()=>[e(I,null,{default:t(()=>[e(M,null,{default:t(()=>[e($,null,{default:t(()=>[...o[4]||(o[4]=[n("SN",-1)])]),_:1}),e($,null,{default:t(()=>[...o[5]||(o[5]=[n("User",-1)])]),_:1}),e($,null,{default:t(()=>[...o[6]||(o[6]=[n("Status",-1)])]),_:1}),e($,{class:"text-right"},{default:t(()=>[...o[7]||(o[7]=[n("Action",-1)])]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[(i(!0),f(w,null,T(s(_),(m,y)=>(i(),k(M,null,{default:t(()=>[e(b,null,{default:t(()=>[n(u(y+1),1)]),_:2},1024),e(b,null,{default:t(()=>[e(P,{user:m},null,8,["user"])]),_:2},1024),e(b),e(b,{class:"text-right"},{default:t(()=>[m.personal.email!=s(c)?(i(),k(L,{key:0},{default:t(()=>[e(B,{"as-child":""},{default:t(()=>[e(h,{modifier:"outline"},{default:t(()=>[e(s(Ke))]),_:1})]),_:1}),e(j,{class:"w-56"},{default:t(()=>[e(V,null,{default:t(()=>[e(F,null,{default:t(()=>[...o[8]||(o[8]=[n("Actions",-1)])]),_:1}),e(N),e(E,{onClick:()=>{r.value=!0,l.value=m}},{default:t(()=>[e(s(We)),o[9]||(o[9]=p("span",null,"Change role",-1))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),s(a).total_page>1?(i(),f("div",at,[p("div",nt,u(s(a)?.current)+" of "+u(s(a)?.total_page)+" pages ",1),p("div",lt,[e(K,{"items-per-page":s(a).per_page,total:s(a).total,"default-page":s(a).current,"onUpdate:page":o[0]||(o[0]=m=>{a.value={...s(a),current:m}})},{default:t(({page:m})=>[e(J,null,{default:t(({items:y})=>[e(H),(i(!0),f(w,null,T(y,(x,Z)=>(i(),f(w,{key:Z},[x.type==="page"?(i(),k(z,{key:0,value:x.value,"is-active":x.value===m},{default:t(()=>[n(u(x.value),1)]),_:2},1032,["value","is-active"])):v("",!0)],64))),128)),e(O,{index:4}),e(G)]),_:2},1024)]),_:1},8,["items-per-page","total","default-page"])])])):v("",!0),e(Y,{open:s(r),"onUpdate:open":o[2]||(o[2]=()=>{r.value=!1,l.value=null})},{default:t(()=>[e(X,{class:"bg-white"},{default:t(()=>[e(Q,null,{default:t(()=>[o[10]||(o[10]=n(" Update ",-1)),s(l)?.personal?.first_name?(i(),f("span",rt,u(s(l)?.personal?.first_name)+"'s",1)):v("",!0),o[11]||(o[11]=n(" role ",-1))]),_:1}),e(W,null,{default:t(()=>[...o[12]||(o[12]=[n("Change role of users",-1)])]),_:1}),e(Oe,{user:s(l),onUpdate:o[1]||(o[1]=()=>{r.value=!1,l.value=null,s(g)()})},null,8,["user"])]),_:1})]),_:1},8,["open"])],64)}}});export{Gt as default};

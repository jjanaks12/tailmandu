import{c as S}from"./bRKmu4jq.js";import{e as u,r as v,D as d,o as c,w as f,s as p,E as l,m as L,C as R,h as b,n as k,q as B,j as M,l as I,aa as j,cg as x,G as z,R as F,K as $}from"./CMjavVp8.js";import{u as g,c as P,n as A}from"./VQ-eN-oM.js";import{P as C}from"./xAYzgGwh.js";const J=e=>e.split(" ").map(a=>a.charAt(0)).join(""),[E,q]=P("AvatarRoot"),D=u({__name:"AvatarRoot",props:{asChild:{type:Boolean},as:{default:"span"}},setup(e){return g(),q({imageLoadingStatus:v("idle")}),(a,t)=>(c(),d(l(C),{"as-child":a.asChild,as:a.as},{default:f(()=>[p(a.$slots,"default")]),_:3},8,["as-child","as"]))}}),T=u({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{default:"span"}},setup(e){const a=e,t=E();g();const o=v(a.delayMs===void 0);return L(r=>{if(a.delayMs&&A){const n=window.setTimeout(()=>{o.value=!0},a.delayMs);r(()=>{window.clearTimeout(n)})}}),(r,n)=>o.value&&l(t).imageLoadingStatus.value!=="loaded"?(c(),d(l(C),{key:0,"as-child":r.asChild,as:r.as},{default:f(()=>[p(r.$slots,"default")]),_:3},8,["as-child","as"])):R("",!0)}});function w(e,a){return e?a?(e.src!==a&&(e.src=a),e.complete&&e.naturalWidth>0?"loaded":"loading"):"error":"idle"}function G(e,{referrerPolicy:a,crossOrigin:t}={}){const o=v(!1),r=v(null),n=b(()=>o.value?(!r.value&&A&&(r.value=new window.Image),r.value):null),m=v(w(n.value,e.value)),h=i=>()=>{o.value&&(m.value=i)};return k(()=>{o.value=!0,L(i=>{const s=n.value;if(!s)return;m.value=w(s,e.value);const _=h("loaded"),y=h("error");s.addEventListener("load",_),s.addEventListener("error",y),a!=null&&a.value&&(s.referrerPolicy=a.value),typeof(t==null?void 0:t.value)=="string"&&(s.crossOrigin=t.value),i(()=>{s.removeEventListener("load",_),s.removeEventListener("error",y)})})}),B(()=>{o.value=!1}),m}const K=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{default:"img"}},emits:["loadingStatusChange"],setup(e,{emit:a}){const t=e,o=a,{src:r,referrerPolicy:n,crossOrigin:m}=M(t);g();const h=E(),i=G(r,{referrerPolicy:n,crossOrigin:m});return I(i,s=>{o("loadingStatusChange",s),s!=="idle"&&(h.imageLoadingStatus.value=s)},{immediate:!0}),(s,_)=>j((c(),d(l(C),{role:"img","as-child":s.asChild,as:s.as,src:l(r),"referrer-policy":l(n)},{default:f(()=>[p(s.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[x,l(i)==="loaded"]])}}),O=u({__name:"Avatar",props:{class:{}},setup(e){const a=e;return(t,o)=>(c(),d(l(D),{"data-slot":"avatar",class:z(l(S)("relative flex size-8 shrink-0 overflow-hidden rounded-full",a.class))},{default:f(()=>[p(t.$slots,"default")]),_:3},8,["class"]))}}),Q=u({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{},class:{}},setup(e){const a=e,t=F(a,"class");return(o,r)=>(c(),d(l(T),$({"data-slot":"avatar-fallback"},l(t),{class:l(S)("bg-muted flex size-full items-center justify-center rounded-full",a.class)}),{default:f(()=>[p(o.$slots,"default")]),_:3},16,["class"]))}}),X=u({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(e){const a=e;return(t,o)=>(c(),d(l(K),$({"data-slot":"avatar-image"},a,{class:"aspect-square size-full"}),{default:f(()=>[p(t.$slots,"default")]),_:3},16))}});export{O as _,X as a,Q as b,J as c};

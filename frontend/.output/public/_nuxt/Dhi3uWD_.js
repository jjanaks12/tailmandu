import{_ as $}from"./Bjqy1P8s.js";import{_ as C}from"./Caqi-Lqi.js";import{_ as R}from"./Dt3IG67z.js";import{_ as E}from"./B7idiuIQ.js";import{_ as T}from"./CPEg5kiF.js";import{a as p,E as _,F as U}from"./DQ5nIErM.js";import{h as D}from"./CQndhnlS.js";import{r as M}from"./DhJVTpb_.js";import{e as P,s as z,a6 as I,a7 as J,r as v,B as j,f as u,w as o,g as e,o as d,b as s,a as i,d as c,m as x,c as q,F as A,J as G,t as H,l as K}from"./CNPhZfj3.js";import{L as O}from"./Jb_vrt15.js";const Q={class:"flex gap-2"},W={class:"flex-grow"},X={class:"flex gap-2"},Y={class:"flex-grow"},Z={class:"flex flex-wrap gap-4"},ee={class:"text-right"},ce=P({__name:"form",props:{role:{}},emits:["update"],setup(g,{emit:h}){const t=g,{permissions:V}=z(I()),{save:b}=J(),F=h,l=v(),n=v(!1),y=m=>{n.value=!0,b(m),n.value=!1,F("update")};return j(()=>{l.value&&t.role&&(l.value.setFieldValue("id",t.role?.id),l.value.setFieldValue("name",t.role?.name),l.value.setFieldValue("description",t.role?.description||""),t.role?.permissions&&t.role?.permissions.length>0&&l.value.setFieldValue("permissions",t.role.permissions.map(m=>m.id)))}),(m,r)=>{const f=$,k=C,w=R,B=E,S=T;return d(),u(e(U),{"validation-schema":e(M),onSubmit:y,class:"flex flex-col gap-4",ref_key:"form",ref:l},{default:o(()=>[s(e(p),{name:"name",as:"div",class:"flex flex-col gap-2"},{default:o(({field:a})=>[s(f,{for:"rf__name"},{default:o(()=>[...r[0]||(r[0]=[c("Role name",-1)])]),_:1}),i("div",Q,[i("div",W,[s(k,x({type:"text"},a,{placeholder:"Name",id:"rf__name"}),null,16),s(e(_),{name:"name"})])])]),_:1}),s(e(p),{name:"description",as:"div",class:"flex flex-col gap-2"},{default:o(({field:a})=>[s(f,{for:"rf__description"},{default:o(()=>[...r[1]||(r[1]=[c("Role description",-1)])]),_:1}),i("div",X,[i("div",Y,[s(w,x({type:"text"},a,{placeholder:"Description",id:"rf__description"}),null,16),s(e(_),{name:"description"})])])]),_:1}),i("div",Z,[(d(!0),q(A,null,G(e(V),a=>(d(),u(e(p),{as:"div",type:"checkbox",name:"permissions",value:a.id,class:"flex gap-2"},{default:o(({handleChange:L,value:N})=>[s(B,{"onUpdate:modelValue":L,id:a.id,"model-value":N?.includes(a.id)},null,8,["onUpdate:modelValue","id","model-value"]),s(f,{for:a.id},{default:o(()=>[c(H(e(D)(a.name)),1)]),_:2},1032,["for"])]),_:2},1032,["value"]))),256)),s(e(_),{name:"permissions"})]),i("div",ee,[s(S,{variant:"secondary",type:"submit",class:"w-[180px]",disabled:e(n)},{default:o(()=>[e(n)?(d(),u(e(O),{key:0,class:"animate-spin relative"})):K("",!0),r[2]||(r[2]=c(" Update details ",-1))]),_:1},8,["disabled"])])]),_:1},8,["validation-schema"])}}});export{ce as _};

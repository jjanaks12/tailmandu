import{_ as L,a as $}from"./C-xaOyYb.js";import{_ as E}from"./DurXOzKZ.js";import{_ as R}from"./CswUeZ4Q.js";import{_ as D}from"./BAFE0boa.js";import{F as v,E as g,a as M}from"./Ik6sADHB.js";import{h as T}from"./DAFbDYLP.js";import{r as U}from"./DCVC01Q_.js";import{e as z,I,M as P,N as K,r as V,n as j,D as h,w as t,E as e,o as f,b as s,a as n,d as p,K as b,c as q,F as A,z as G,t as H,C as J}from"./CMjavVp8.js";import{L as O}from"./cRn6fn_Q.js";const Q={class:"flex gap-2"},W={class:"flex-grow"},X={class:"flex gap-2"},Y={class:"flex-grow"},Z={class:"flex flex-wrap gap-4"},ee={class:"text-right"},me=z({__name:"form",props:{role:{}},emits:["update"],setup(F,{emit:y}){const i=F,{permissions:k}=I(P()),{save:w}=K(),N=y,r=V(),m=V(!1),S=d=>{m.value=!0,w(d),m.value=!1,N("update")};return j(()=>{var d,a,l,c,_;r.value&&i.role&&(r.value.setFieldValue("id",(d=i.role)==null?void 0:d.id),r.value.setFieldValue("name",(a=i.role)==null?void 0:a.name),r.value.setFieldValue("description",((l=i.role)==null?void 0:l.description)||""),(c=i.role)!=null&&c.permissions&&((_=i.role)==null?void 0:_.permissions.length)>0&&r.value.setFieldValue("permissions",i.role.permissions.map(u=>u.id)))}),(d,a)=>{const l=L,c=E,_=$,u=R,B=D;return f(),h(e(M),{"validation-schema":e(U),onSubmit:S,class:"flex flex-col gap-4",ref_key:"form",ref:r},{default:t(()=>[s(e(v),{name:"name",as:"div",class:"flex flex-col gap-2"},{default:t(({field:o})=>[s(l,{for:"rf__name"},{default:t(()=>a[0]||(a[0]=[p("Role name")])),_:1,__:[0]}),n("div",Q,[n("div",W,[s(c,b({type:"text"},o,{placeholder:"Name",id:"rf__name"}),null,16),s(e(g),{name:"name"})])])]),_:1}),s(e(v),{name:"description",as:"div",class:"flex flex-col gap-2"},{default:t(({field:o})=>[s(l,{for:"rf__description"},{default:t(()=>a[1]||(a[1]=[p("Role description")])),_:1,__:[1]}),n("div",X,[n("div",Y,[s(_,b({type:"text"},o,{placeholder:"Description",id:"rf__description"}),null,16),s(e(g),{name:"description"})])])]),_:1}),n("div",Z,[(f(!0),q(A,null,G(e(k),o=>(f(),h(e(v),{as:"div",type:"checkbox",name:"permissions",value:o.id,class:"flex gap-2"},{default:t(({handleChange:C,value:x})=>[s(u,{"onUpdate:modelValue":C,id:o.id,"model-value":x==null?void 0:x.includes(o.id)},null,8,["onUpdate:modelValue","id","model-value"]),s(l,{for:o.id},{default:t(()=>[p(H(e(T)(o.name)),1)]),_:2},1032,["for"])]),_:2},1032,["value"]))),256)),s(e(g),{name:"permissions"})]),n("div",ee,[s(B,{variant:"secondary",type:"submit",class:"w-[180px]",disabled:e(m)},{default:t(()=>[e(m)?(f(),h(e(O),{key:0,class:"animate-spin relative"})):J("",!0),a[2]||(a[2]=p(" Update details "))]),_:1,__:[2]},8,["disabled"])])]),_:1},8,["validation-schema"])}}});export{me as _};

import{_ as ve}from"./DurXOzKZ.js";import{b as j,_ as Pe}from"./BAFE0boa.js";import{_ as be,a as $e,b as he,c as xe,d as Ce,e as ye}from"./p98pM6S4.js";import{_ as we,a as Be,b as Ie,c as ke}from"./C9wLNaWu.js";import{_ as Me}from"./BNgYPqNG.js";import{_ as Re}from"./YaS_LA93.js";import{e as v,D as m,o as d,w as l,s as b,d as c,K as x,E as e,j as Se,h as M,O,P as H,t as $,c as k,b as n,a as h,Q as ze,C as N,R as S,S as Ee,r as V,T as De,U as Ne,l as Ae,V as Te,W as Ue,I as Fe,n as Le,F as U,z as Q}from"./CMjavVp8.js";import{_ as Ve,a as je,b as Oe,c as He}from"./DHbATN6T.js";import{_ as qe}from"./DrYuJHah.js";import{_ as Ge,a as Ke}from"./C1qQvf9_.js";import{c as z}from"./bRKmu4jq.js";import{u as E,a as Qe,c as We,b as Je,d as J}from"./VQ-eN-oM.js";import{P as D}from"./xAYzgGwh.js";import{E as Xe,C as Ye,a as Ze,S as ea}from"./ntm7IuWe.js";import{_ as aa,a as sa,b as ta,c as oa}from"./UVl6tQ0h.js";import{F as na,a as la}from"./Ik6sADHB.js";import{_ as ra}from"./Buq1vm7w.js";import{u as ia}from"./DQLf1w2b.js";import{u as ua}from"./DzOswS_p.js";import{S as pa}from"./CeJu27aV.js";import{S as da}from"./3KzPBn3Y.js";import{E as ca}from"./Cz562ICh.js";import"./BF_x-txX.js";import"./CzzPYyuk.js";import"./CNAOxuXL.js";import"./nZKF5ZxW.js";import"./DGNkmS_y.js";import"./B5rxJs06.js";import"./5o-X49G4.js";import"./zXeWkoyS.js";import"./ByZ92x1S.js";import"./DL3t_qLo.js";import"./DCVC01Q_.js";import"./cRn6fn_Q.js";const _a=v({__name:"PaginationEllipsis",props:{asChild:{type:Boolean},as:{}},setup(i){const o=i;return E(),(a,t)=>(d(),m(e(D),x(o,{"data-type":"ellipsis"}),{default:l(()=>[b(a.$slots,"default",{},()=>[t[0]||(t[0]=c("â€¦"))])]),_:3},16))}}),[L,ma]=We("PaginationRoot"),fa=v({__name:"PaginationRoot",props:{page:{},defaultPage:{default:1},itemsPerPage:{},total:{default:0},siblingCount:{default:2},disabled:{type:Boolean},showEdges:{type:Boolean,default:!1},asChild:{type:Boolean},as:{default:"nav"}},emits:["update:page"],setup(i,{emit:o}){const a=i,t=o,{siblingCount:u,disabled:s,showEdges:p}=Se(a);E();const _=Qe(a,"page",t,{defaultValue:a.defaultPage,passive:a.page===void 0}),r=M(()=>Math.max(1,Math.ceil(a.total/(a.itemsPerPage||1))));return ma({page:_,onPageChange(f){_.value=f},pageCount:r,siblingCount:u,disabled:s,showEdges:p}),(f,C)=>(d(),m(e(D),{as:f.as,"as-child":f.asChild},{default:l(()=>[b(f.$slots,"default",{page:e(_),pageCount:r.value})]),_:3},8,["as","as-child"]))}});function B(i,o){const a=o-i+1;return Array.from({length:a},(t,u)=>u+i)}function ga(i){return i.map(o=>typeof o=="number"?{type:"page",value:o}:{type:"ellipsis"})}const F="ellipsis";function va(i,o,a,t){const s=o,p=Math.max(i-a,1),_=Math.min(i+a,s);if(t){const f=Math.min(2*a+5,o)-2,C=p>3&&Math.abs(s-f-1+1)>2&&Math.abs(p-1)>2,g=_<s-2&&Math.abs(s-f)>2&&Math.abs(s-_)>2;if(!C&&g)return[...B(1,f),F,s];if(C&&!g){const w=B(s-f+1,s);return[1,F,...w]}if(C&&g){const w=B(p,_);return[1,F,...w,F,s]}return B(1,s)}else{const r=a*2+1;return o<r?B(1,s):i<=a+1?B(1,r):o-i<=a?B(o-r+1,s):B(p,_)}}const Pa=v({__name:"PaginationList",props:{asChild:{type:Boolean},as:{}},setup(i){const o=i;E();const a=L(),t=M(()=>ga(va(a.page.value,a.pageCount.value,a.siblingCount.value,a.showEdges.value)));return(u,s)=>(d(),m(e(D),O(H(o)),{default:l(()=>[b(u.$slots,"default",{items:t.value})]),_:3},16))}}),ba=v({__name:"PaginationListItem",props:{value:{},asChild:{type:Boolean},as:{default:"button"}},setup(i){const o=i;E();const a=L(),t=M(()=>a.page.value===o.value),u=M(()=>a.disabled.value);return(s,p)=>(d(),m(e(D),x(o,{"data-type":"page","aria-label":`Page ${s.value}`,"aria-current":t.value?"page":void 0,"data-selected":t.value?"true":void 0,disabled:u.value,type:s.as==="button"?"button":void 0,onClick:p[0]||(p[0]=_=>!u.value&&e(a).onPageChange(s.value))}),{default:l(()=>[b(s.$slots,"default",{},()=>[c($(s.value),1)])]),_:3},16,["aria-label","aria-current","data-selected","disabled","type"]))}}),$a=v({__name:"PaginationNext",props:{asChild:{type:Boolean},as:{default:"button"}},setup(i){const o=i;E();const a=L(),t=M(()=>a.page.value===a.pageCount.value||a.disabled.value);return(u,s)=>(d(),m(e(D),x(o,{"aria-label":"Next Page",type:u.as==="button"?"button":void 0,disabled:t.value,onClick:s[0]||(s[0]=p=>!t.value&&e(a).onPageChange(e(a).page.value+1))}),{default:l(()=>[b(u.$slots,"default",{},()=>[s[1]||(s[1]=c("Next page"))])]),_:3},16,["type","disabled"]))}}),ha=v({__name:"PaginationPrev",props:{asChild:{type:Boolean},as:{default:"button"}},setup(i){const o=i;E();const a=L(),t=M(()=>a.page.value===1||a.disabled.value);return(u,s)=>(d(),m(e(D),x(o,{"aria-label":"Previous Page",type:u.as==="button"?"button":void 0,disabled:t.value,onClick:s[0]||(s[0]=p=>!t.value&&e(a).onPageChange(e(a).page.value-1))}),{default:l(()=>[b(u.$slots,"default",{},()=>[s[1]||(s[1]=c("Prev page"))])]),_:3},16,["type","disabled"]))}}),xa={class:"flex items-center gap-2"},Ca={class:"flex-grow"},ya={class:"not-italic block"},wa=v({__name:"UserInfo",props:{user:{}},setup(i){const o=i,a=M(()=>{var t,u,s,p,_,r;return[(u=(t=o.user)==null?void 0:t.personal)==null?void 0:u.first_name,(p=(s=o.user)==null?void 0:s.personal)==null?void 0:p.middle_name,(r=(_=o.user)==null?void 0:_.personal)==null?void 0:r.last_name].join(" ").trim()});return(t,u)=>{var C;const s=Be,p=Ie,_=we,r=Me,f=Re;return d(),k("div",xa,[n(_,{class:"w-[60px] h-[60px]"},{default:l(()=>{var g,y,w;return[n(s,{src:e(ze)((w=(y=(g=t.user)==null?void 0:g.personal)==null?void 0:y.avatar)==null?void 0:w.file_name),class:"object-cover"},null,8,["src"]),n(p,null,{default:l(()=>[c($(e(ke)(e(a))),1)]),_:1})]}),_:1}),h("div",Ca,[n(r,{to:`/dashboard/users?id=${t.user.id}`,class:"hover:underline"},{default:l(()=>[c($(e(a)),1)]),_:1},8,["to"]),h("em",ya,$((C=t.user.personal)==null?void 0:C.email),1),t.user.role?(d(),m(f,{key:0,variant:"secondary"},{default:l(()=>{var g,y;return[c($((y=(g=t.user)==null?void 0:g.role)==null?void 0:y.name),1)]}),_:1})):N("",!0)])])}}}),Ba=v({__name:"Pagination",props:{page:{},defaultPage:{},itemsPerPage:{},total:{},siblingCount:{},disabled:{type:Boolean},showEdges:{type:Boolean},asChild:{type:Boolean},as:{},class:{}},emits:["update:page"],setup(i,{emit:o}){const a=i,t=o,u=S(a,"class"),s=Je(u,t);return(p,_)=>(d(),m(e(fa),x({"data-slot":"pagination"},e(s),{class:e(z)("mx-auto flex w-full justify-center",a.class)}),{default:l(r=>[b(p.$slots,"default",O(H(r)))]),_:3},16,["class"]))}}),Ia=v({__name:"PaginationContent",props:{asChild:{type:Boolean},as:{},class:{}},setup(i){const o=i,a=S(o,"class");return(t,u)=>(d(),m(e(Pa),x({"data-slot":"pagination-content"},e(a),{class:e(z)("flex flex-row items-center gap-1",o.class)}),{default:l(s=>[b(t.$slots,"default",O(H(s)))]),_:3},16,["class"]))}}),ka=v({__name:"PaginationEllipsis",props:{asChild:{type:Boolean},as:{},class:{}},setup(i){const o=i,a=S(o,"class");return(t,u)=>(d(),m(e(_a),x({"data-slot":"pagination-ellipsis"},e(a),{class:e(z)("flex size-9 items-center justify-center",o.class)}),{default:l(()=>[b(t.$slots,"default",{},()=>[n(e(Xe),{class:"size-4"}),u[0]||(u[0]=h("span",{class:"sr-only"},"More pages",-1))])]),_:3},16,["class"]))}}),Ma=v({__name:"PaginationItem",props:{value:{},asChild:{type:Boolean},as:{},size:{default:"icon"},class:{},isActive:{type:Boolean}},setup(i){const o=i,a=S(o,"class","size","isActive");return(t,u)=>(d(),m(e(ba),x({"data-slot":"pagination-item"},e(a),{class:e(z)(e(j)({variant:t.isActive?"outline":"ghost",size:t.size}),o.class)}),{default:l(()=>[b(t.$slots,"default")]),_:3},16,["class"]))}}),Ra=v({__name:"PaginationNext",props:{asChild:{type:Boolean},as:{},size:{default:"default"},class:{}},setup(i){const o=i,a=S(o,"class","size"),t=J(a);return(u,s)=>(d(),m(e($a),x({"data-slot":"pagination-next",class:e(z)(e(j)({variant:"ghost",size:u.size}),"gap-1 px-2.5 sm:pr-2.5",o.class)},e(t)),{default:l(()=>[b(u.$slots,"default",{},()=>[s[0]||(s[0]=h("span",{class:"hidden sm:block"},"Next",-1)),n(e(Ye))])]),_:3},16,["class"]))}}),Sa=v({__name:"PaginationPrevious",props:{asChild:{type:Boolean},as:{},size:{default:"default"},class:{}},setup(i){const o=i,a=S(o,"class","size"),t=J(a);return(u,s)=>(d(),m(e(ha),x({"data-slot":"pagination-previous",class:e(z)(e(j)({variant:"ghost",size:u.size}),"gap-1 px-2.5 sm:pr-2.5",o.class)},e(t)),{default:l(()=>[b(u.$slots,"default",{},()=>[n(e(Ze)),s[0]||(s[0]=h("span",{class:"hidden sm:block"},"Previous",-1))])]),_:3},16,["class"]))}}),W=Ee("users",()=>{const i=V([]),{isLoading:o,params:a}=De(),{axios:t}=Ne(),u=async()=>{const{data:{data:s,...p}}=await t.get("/users",{params:a.value});i.value=s,a.value=p,i.value=s};return Ae(a,(s,p)=>{Te(s,p)||u()}),{users:i,isLoading:o,params:a,fetch:u}}),za={class:"flex gap-4 mb-20"},Ea={class:"flex-grow"},Da={class:"flex gap-2 mb-4"},Na={key:0,class:"flex items-center justify-end space-x-2 py-4"},Aa={class:"flex-1 text-sm text-muted-foreground"},Ta={class:"space-x-2"},Ua={key:0},bs=v({__name:"index",setup(i){ia({title:"Contacts"});const{public:{mailAdmin:o}}=Ue(),{users:a,params:t}=Fe(W()),{fetch:u}=W();ua();const s=V(!1),p=V(null);return Le(()=>{u()}),(_,r)=>{var q,G;const f=ve,C=Pe,g=xe,y=he,w=$e,A=ye,X=wa,Y=je,Z=Ge,ee=Ke,ae=He,se=qe,te=Oe,oe=Ve,ne=Ce,le=be,re=Sa,ie=Ma,ue=ka,pe=Ra,de=Ia,ce=Ba,_e=ta,me=oa,fe=sa,ge=aa;return d(),k(U,null,[h("div",za,[h("div",Ea,[h("div",Da,[n(e(pa)),r[3]||(r[3]=c(" Filters "))])]),n(e(la),{class:"max-w-[320px] w-full flex items-center gap-2"},{default:l(()=>[n(e(na),{name:"search"},{default:l(({field:P})=>[n(f,x(P,{placeholder:"Search users"}),null,16)]),_:1}),n(C,{variant:"secondary",size:"lg"},{default:l(()=>[n(e(da))]),_:1})]),_:1})]),n(le,null,{default:l(()=>[n(w,null,{default:l(()=>[n(y,null,{default:l(()=>[n(g,null,{default:l(()=>r[4]||(r[4]=[c("SN")])),_:1,__:[4]}),n(g,null,{default:l(()=>r[5]||(r[5]=[c("User")])),_:1,__:[5]}),n(g,null,{default:l(()=>r[6]||(r[6]=[c("Status")])),_:1,__:[6]}),n(g,{class:"text-right"},{default:l(()=>r[7]||(r[7]=[c("Action")])),_:1,__:[7]})]),_:1})]),_:1}),n(ne,null,{default:l(()=>[(d(!0),k(U,null,Q(e(a),(P,R)=>(d(),m(y,null,{default:l(()=>[n(A,null,{default:l(()=>[c($(R+1),1)]),_:2},1024),n(A,null,{default:l(()=>[n(X,{user:P},null,8,["user"])]),_:2},1024),n(A),n(A,{class:"text-right"},{default:l(()=>[P.personal.email!=e(o)?(d(),m(oe,{key:0},{default:l(()=>[n(Y,{"as-child":""},{default:l(()=>[n(C,{variant:"outline"},{default:l(()=>[n(e(ca))]),_:1})]),_:1}),n(te,{class:"w-56"},{default:l(()=>[n(se,null,{default:l(()=>[n(Z,null,{default:l(()=>r[8]||(r[8]=[c("Actions")])),_:1,__:[8]}),n(ee),n(ae,{onClick:()=>{s.value=!0,p.value=P}},{default:l(()=>[n(e(ea)),r[9]||(r[9]=h("span",null,"Change role",-1))]),_:2,__:[9]},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):N("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),e(t).total_page>1?(d(),k("div",Na,[h("div",Aa,$((q=e(t))==null?void 0:q.current)+" of "+$((G=e(t))==null?void 0:G.total_page)+" pages ",1),h("div",Ta,[n(ce,{"items-per-page":e(t).per_page,total:e(t).total,"default-page":e(t).current,"onUpdate:page":r[0]||(r[0]=P=>{t.value={...e(t),current:P}})},{default:l(({page:P})=>[n(de,null,{default:l(({items:R})=>[n(re),(d(!0),k(U,null,Q(R,(I,T)=>(d(),k(U,{key:T},[I.type==="page"?(d(),m(ie,{key:0,value:I.value,"is-active":I.value===P},{default:l(()=>[c($(I.value),1)]),_:2},1032,["value","is-active"])):N("",!0)],64))),128)),n(ue,{index:4}),n(pe)]),_:2},1024)]),_:1},8,["items-per-page","total","default-page"])])])):N("",!0),n(ge,{open:e(s),"onUpdate:open":r[2]||(r[2]=()=>{s.value=!1,p.value=null})},{default:l(()=>[n(fe,{class:"bg-white"},{default:l(()=>{var P;return[n(_e,null,{default:l(()=>{var R,I,T,K;return[r[10]||(r[10]=c(" Update ")),(I=(R=e(p))==null?void 0:R.personal)!=null&&I.first_name?(d(),k("span",Ua,$((K=(T=e(p))==null?void 0:T.personal)==null?void 0:K.first_name)+"'s",1)):N("",!0),r[11]||(r[11]=c(" role "))]}),_:1,__:[10,11]}),n(me,null,{default:l(()=>r[12]||(r[12]=[c("Change role of users")])),_:1,__:[12]}),c(" "+$((P=e(p))==null?void 0:P.personal)+" ",1),n(ra,{user:e(p),onUpdate:r[1]||(r[1]=()=>{s.value=!1,p.value=null,e(u)()})},null,8,["user"])]}),_:1})]),_:1},8,["open"])],64)}}});export{bs as default};

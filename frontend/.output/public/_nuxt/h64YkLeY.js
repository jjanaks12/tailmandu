import{i as R}from"./CzxnmzmQ.js";import{r as m,E as u,aG as $,e as v,m as h,U as d,K as k,aL as w,V as P}from"./CQTPwDMt.js";import{S as p}from"./BolWmxc9.js";import{d as T}from"./CeaXpSoW.js";function _(t){const i=R({dir:m("ltr")});return u(()=>t?.value||i.dir?.value||"ltr")}function E(){const t=m(),i=u(()=>["#text","#comment"].includes(t.value?.$el.nodeName)?t.value?.$el.nextElementSibling:T(t));return{primitiveElement:t,currentElement:i}}const C="data-reka-collection-item";function z(t={}){const{key:i="",isProvider:M=!1}=t,f=`${i}CollectionProvider`;let e;if(M){const n=m(new Map);e={collectionRef:m(),itemMap:n},w(f,e)}else e=$(f);const x=(n=!1)=>{const o=e.collectionRef.value;if(!o)return[];const r=Array.from(o.querySelectorAll(`[${C}]`)),l=Array.from(e.itemMap.value.values()).sort((s,c)=>r.indexOf(s.ref)-r.indexOf(c.ref));return n?l:l.filter(s=>s.ref.dataset.disabled!=="")},A=v({name:"CollectionSlot",setup(n,{slots:o}){const{primitiveElement:r,currentElement:a}=E();return k(a,()=>{e.collectionRef.value=a.value}),()=>d(p,{ref:r},o)}}),y=v({name:"CollectionItem",inheritAttrs:!1,props:{value:{validator:()=>!0}},setup(n,{slots:o,attrs:r}){const{primitiveElement:a,currentElement:l}=E();return h(s=>{if(l.value){const c=P(l.value);e.itemMap.value.set(c,{ref:l.value,value:n.value}),s(()=>e.itemMap.value.delete(c))}}),()=>d(p,{...r,[C]:"",ref:a},o)}}),S=u(()=>Array.from(e.itemMap.value.values())),I=u(()=>e.itemMap.value.size);return{getItems:x,reactiveItems:S,itemMapSize:I,CollectionSlot:A,CollectionItem:y}}export{z as a,E as b,_ as u};

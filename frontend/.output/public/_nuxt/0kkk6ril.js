import{c as w}from"./CPYLdFy8.js";import{e as i,r as m,f as d,o as c,w as f,J as p,g as o,l as S,h as k,E,q as R,ac as I,I as $,V as B,aE as M,aY as P,v as F,N as x,m as q}from"./qg68g3Ym.js";import{u as h,i as L}from"./K4mxSTIr.js";import{P as y}from"./CZ-43qDQ.js";import{c as z}from"./BDnat4bi.js";const V=a=>a.split(" ").map(e=>e.charAt(0)).join(""),[b,O]=z("AvatarRoot");var j=i({__name:"AvatarRoot",props:{asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){return h(),O({imageLoadingStatus:m("idle")}),(e,s)=>(c(),d(o(y),{"as-child":e.asChild,as:e.as},{default:f(()=>[p(e.$slots,"default")]),_:3},8,["as-child","as"]))}}),N=j,T=i({__name:"AvatarFallback",props:{delayMs:{type:Number,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"span"}},setup(a){const e=a,s=b();h();const r=m(e.delayMs===void 0);return S(l=>{if(e.delayMs&&L){const n=window.setTimeout(()=>{r.value=!0},e.delayMs);l(()=>{window.clearTimeout(n)})}}),(l,n)=>r.value&&o(s).imageLoadingStatus.value!=="loaded"?(c(),d(o(y),{key:0,"as-child":l.asChild,as:l.as},{default:f(()=>[p(l.$slots,"default")]),_:3},8,["as-child","as"])):k("v-if",!0)}}),D=T;function A(a,e){return a?e?(a.src!==e&&(a.src=e),a.complete&&a.naturalWidth>0?"loaded":"loading"):"error":"idle"}function J(a,{referrerPolicy:e,crossOrigin:s}={}){const r=m(!1),l=m(null),n=E(()=>r.value?(!l.value&&L&&(l.value=new window.Image),l.value):null),v=m(A(n.value,a.value)),_=u=>()=>{r.value&&(v.value=u)};return R(()=>{r.value=!0,S(u=>{const t=n.value;if(!t)return;v.value=A(t,a.value);const g=_("loaded"),C=_("error");t.addEventListener("load",g),t.addEventListener("error",C),e?.value&&(t.referrerPolicy=e.value),typeof s?.value=="string"&&(t.crossOrigin=s.value),u(()=>{t.removeEventListener("load",g),t.removeEventListener("error",C)})})}),I(()=>{r.value=!1}),v}var U=i({__name:"AvatarImage",props:{src:{type:String,required:!0},referrerPolicy:{type:null,required:!1},crossOrigin:{type:null,required:!1},asChild:{type:Boolean,required:!1},as:{type:null,required:!1,default:"img"}},emits:["loadingStatusChange"],setup(a,{emit:e}){const s=a,r=e,{src:l,referrerPolicy:n,crossOrigin:v}=$(s);h();const _=b(),u=J(l,{referrerPolicy:n,crossOrigin:v});return B(u,t=>{r("loadingStatusChange",t),t!=="idle"&&(_.imageLoadingStatus.value=t)},{immediate:!0}),(t,g)=>M((c(),d(o(y),{role:"img","as-child":t.asChild,as:t.as,src:o(l),"referrer-policy":o(n)},{default:f(()=>[p(t.$slots,"default")]),_:3},8,["as-child","as","src","referrer-policy"])),[[P,o(u)==="loaded"]])}}),W=U;const X=i({__name:"Avatar",props:{class:{}},setup(a){const e=a;return(s,r)=>(c(),d(o(N),{"data-slot":"avatar",class:F(o(w)("relative flex size-8 shrink-0 overflow-hidden rounded-full",e.class))},{default:f(()=>[p(s.$slots,"default")]),_:3},8,["class"]))}}),Z=i({__name:"AvatarFallback",props:{delayMs:{},asChild:{type:Boolean},as:{},class:{}},setup(a){const e=a,s=x(e,"class");return(r,l)=>(c(),d(o(D),q({"data-slot":"avatar-fallback"},o(s),{class:o(w)("bg-muted flex size-full items-center justify-center rounded-full",e.class)}),{default:f(()=>[p(r.$slots,"default")]),_:3},16,["class"]))}}),ee=i({__name:"AvatarImage",props:{src:{},referrerPolicy:{},crossOrigin:{},asChild:{type:Boolean},as:{}},setup(a){const e=a;return(s,r)=>(c(),d(o(W),q({"data-slot":"avatar-image"},e,{class:"aspect-square size-full"}),{default:f(()=>[p(s.$slots,"default")]),_:3},16))}});export{X as _,ee as a,Z as b,V as c};

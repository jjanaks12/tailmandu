import{_ as P}from"./DiU-Texi.js";import{_ as q}from"./XeUdO5dH.js";import{_ as z}from"./BpDApRAD.js";import{_ as H}from"./C5kvzf0a.js";import{$ as R,_ as j}from"./Bd6GeqFA.js";import{_ as A}from"./2ZmUPStG.js";import{e as G,s as J,u as V,r as S,V as K,q as O,f as g,w as t,g as a,y as $,o as _,b as e,a as D,m as p,d,c as E,h as F,t as Q,F as W,aa as X}from"./qg68g3Ym.js";import{a as i,E as c,F as Z}from"./DJ8eIciF.js";import{s as Y}from"./B1JEaRz-.js";import{d as ee}from"./CfwLjDUh.js";import{L as ae}from"./zaLMoPVm.js";import{L as te}from"./B7XZuiwR.js";const se={key:0,class:"flex"},le={class:"flex gap-3"},oe={class:"text-right"},xe=G({__name:"form",props:{trailRace:{}},emits:["update"],setup(w,{emit:L}){const o=w,{isLoading:x}=J(V()),{save:B}=V(),M=L,r=S(),n=S(""),U=()=>{n.value=Y(r.value?.values?.title),setTimeout(()=>{r.value?.setFieldValue("slug",n.value)},100)},C=async m=>{await B({...m,start_date:m.start_date.toString(),end_date:m.end_date.toString()}),M("update")},y=()=>{o.trailRace&&r.value?.setValues({id:o.trailRace.id,name:o.trailRace.name,slug:o.trailRace.slug,excerpt:o.trailRace.excerpt,start_date:R($(o.trailRace.start).format("YYYY-MM-DD")),end_date:R($(o.trailRace.end).format("YYYY-MM-DD"))})},T=()=>{ee(()=>{n.value=Y(r.value?.values?.name),r.value?.setFieldValue("slug",n.value)})};return K(()=>o.trailRace,()=>{y()}),O(()=>{y()}),(m,s)=>{const v=P,u=q,N=z,k=H,b=j,h=A;return _(),g(a(Z),{"validation-schema":a(X),class:"flex flex-col gap-5",onSubmit:C,ref_key:"form",ref:r},{default:t(({values:I})=>[e(a(i),{name:"id"},{default:t(({field:l})=>[e(v,p({type:"hidden"},l),null,16)]),_:1}),e(a(i),{name:"name",as:"div",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(u,{for:"ef__name"},{default:t(()=>[...s[0]||(s[0]=[d("Event name",-1)])]),_:1}),e(v,p({type:"text"},l,{id:"ef__name",onInput:T}),null,16),e(a(c),{name:"name"})]),_:1}),e(a(i),{as:"div",name:"slug",class:"flex flex-col gap-2"},{default:t(({field:l,value:f})=>[a(n)&&a(n)==m.trailRace?.slug?(_(),E("div",se,[e(N,null,{default:t(()=>[d(Q(a(n)),1)]),_:1}),a(n)!=f?(_(),g(k,{key:0,type:"button",variant:"link",size:"sm",onClick:U},{default:t(()=>[e(a(ae)),s[1]||(s[1]=d(" update URL ",-1))]),_:1})):F("",!0)])):(_(),E(W,{key:1},[e(u,{for:"ef__slug"},{default:t(()=>[...s[2]||(s[2]=[d("Slug",-1)])]),_:1}),e(v,p({type:"text"},l,{id:"ef__slug"}),null,16),e(a(c),{name:"slug"})],64))]),_:1}),D("div",le,[e(a(i),{name:"start_date",as:"div",class:"w-1/2 flex flex-col gap-2"},{default:t(({handleInput:l,value:f})=>[e(u,{for:"ef__start_date"},{default:t(()=>[...s[3]||(s[3]=[d("Start Date",-1)])]),_:1}),e(b,{label:"Start date","onUpdate:modelValue":l,"model-value":f},null,8,["onUpdate:modelValue","model-value"]),e(a(c),{name:"start_date"})]),_:1}),e(a(i),{name:"end_date",as:"div",class:"w-1/2 flex flex-col gap-2"},{default:t(({handleInput:l,value:f})=>[e(u,{for:"ef__end_date"},{default:t(()=>[...s[4]||(s[4]=[d("End Date",-1)])]),_:1}),e(b,{label:"End date","onUpdate:modelValue":l,"model-value":f,"min-value":I.start_date},null,8,["onUpdate:modelValue","model-value","min-value"]),e(a(c),{name:"end_date"})]),_:2},1024)]),e(a(i),{name:"excerpt",as:"div",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(u,{for:"ef__excerpt"},{default:t(()=>[...s[5]||(s[5]=[d("Event short description",-1)])]),_:1}),e(h,p({type:"text"},l,{id:"ef__excerpt"}),null,16),e(a(c),{name:"excerpt"})]),_:1}),D("div",oe,[e(k,{variant:"secondary",type:"submit",class:"w-[180px]",disabled:a(x)},{default:t(()=>[a(x)?(_(),g(a(te),{key:0,class:"animate-spin relative"})):F("",!0),s[6]||(s[6]=d(" Update details ",-1))]),_:1},8,["disabled"])])]),_:1},8,["validation-schema"])}}});export{xe as _};

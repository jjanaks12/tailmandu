import{_ as P}from"./KnfxygQr.js";import{_ as j}from"./CqJy5Exi.js";import{_ as z}from"./-mDNjDUg.js";import{_ as H}from"./Dc14EJ-Z.js";import{$ as S,_ as K}from"./2l_uslt0.js";import{_ as q}from"./DIhd3umO.js";import{e as A,s as G,u as V,r as $,K as J,p as O,f as x,w as t,g as a,x as D,o as f,b as e,a as E,n as p,d,c as F,h as Y,t as Q,F as W,aj as X}from"./CQTPwDMt.js";import{a as i,E as _,F as Z}from"./B7w6sks-.js";import{s as w}from"./D3obJynx.js";import{d as ee}from"./CfwLjDUh.js";import{L as ae}from"./BVJj5Dzc.js";import{L as te}from"./DvMzyCV2.js";const se={key:0,class:"flex"},le={class:"flex gap-3"},oe={class:"text-right"},ge=A({__name:"form",props:{trailRace:{}},emits:["update"],setup(g,{emit:L}){const o=g,{isLoading:y}=G(V()),{save:B}=V(),M=L,r=$(),n=$(""),U=()=>{n.value=w(r.value?.values?.title),setTimeout(()=>{r.value?.setFieldValue("slug",n.value)},100)},C=async c=>{await B({...c,start_date:c.start_date.toString(),end_date:c.end_date.toString()}),M("update")},k=()=>{o.trailRace&&r.value?.setValues({id:o.trailRace.id,name:o.trailRace.name,slug:o.trailRace.slug,excerpt:o.trailRace.excerpt,start_date:S(D(o.trailRace.start).format("YYYY-MM-DD")),end_date:S(D(o.trailRace.end).format("YYYY-MM-DD"))})},T=()=>{ee(()=>{n.value=w(r.value?.values?.name),r.value?.setFieldValue("slug",n.value)})};return J(()=>o.trailRace,()=>{k()}),O(()=>{k()}),(c,s)=>{const v=P,m=j,N=z,b=H,R=K,h=q;return f(),x(a(Z),{"validation-schema":a(X),class:"flex flex-col gap-5",onSubmit:C,ref_key:"form",ref:r},{default:t(({values:I})=>[e(a(i),{name:"id"},{default:t(({field:l})=>[e(v,p({type:"hidden"},l),null,16)]),_:1}),e(a(i),{name:"name",as:"div",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(m,{for:"ef__name"},{default:t(()=>[...s[0]||(s[0]=[d("Event name",-1)])]),_:1}),e(v,p({type:"text"},l,{id:"ef__name",onInput:T}),null,16),e(a(_),{name:"name"})]),_:1}),e(a(i),{as:"div",name:"slug",class:"flex flex-col gap-2"},{default:t(({field:l,value:u})=>[a(n)&&a(n)==g.trailRace?.slug?(f(),F("div",se,[e(N,null,{default:t(()=>[d(Q(a(n)),1)]),_:1}),a(n)!=u?(f(),x(b,{key:0,type:"button",variant:"link",size:"sm",onClick:U},{default:t(()=>[e(a(ae)),s[1]||(s[1]=d(" update URL ",-1))]),_:1})):Y("",!0)])):(f(),F(W,{key:1},[e(m,{for:"ef__slug"},{default:t(()=>[...s[2]||(s[2]=[d("Slug",-1)])]),_:1}),e(v,p({type:"text"},l,{id:"ef__slug"}),null,16),e(a(_),{name:"slug"})],64))]),_:1}),E("div",le,[e(a(i),{name:"start_date",as:"div",class:"w-1/2 flex flex-col gap-2"},{default:t(({handleInput:l,value:u})=>[e(m,{for:"ef__start_date"},{default:t(()=>[...s[3]||(s[3]=[d("Start Date",-1)])]),_:1}),e(R,{label:"Start date","onUpdate:modelValue":l,"model-value":u},null,8,["onUpdate:modelValue","model-value"]),e(a(_),{name:"start_date"})]),_:1}),e(a(i),{name:"end_date",as:"div",class:"w-1/2 flex flex-col gap-2"},{default:t(({handleInput:l,value:u})=>[e(m,{for:"ef__end_date"},{default:t(()=>[...s[4]||(s[4]=[d("End Date",-1)])]),_:1}),e(R,{label:"End date","onUpdate:modelValue":l,"model-value":u,"min-value":I.start_date},null,8,["onUpdate:modelValue","model-value","min-value"]),e(a(_),{name:"end_date"})]),_:2},1024)]),e(a(i),{name:"excerpt",as:"div",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(m,{for:"ef__excerpt"},{default:t(()=>[...s[5]||(s[5]=[d("Event short description",-1)])]),_:1}),e(h,p({type:"text"},l,{id:"ef__excerpt"}),null,16),e(a(_),{name:"excerpt"})]),_:1}),E("div",oe,[e(b,{variant:"secondary",type:"submit",class:"w-[180px]",disabled:a(y)},{default:t(()=>[a(y)?(f(),x(a(te),{key:0,class:"animate-spin relative"})):Y("",!0),s[6]||(s[6]=d(" Update details ",-1))]),_:1},8,["disabled"])])]),_:1},8,["validation-schema"])}}});export{ge as _};

import{_ as Z}from"./DiU-Texi.js";import{_ as G,a as J,b as K,c as O}from"./0kkk6ril.js";import{_ as Q}from"./XeUdO5dH.js";import{_ as W,a as X,b as Y,c as ee,d as ae}from"./CHnIA0z0.js";import{_ as se}from"./CNmloGOb.js";import{_ as te}from"./C5kvzf0a.js";import{a as u,E as f,F as le}from"./DJ8eIciF.js";import{j as V,k as _,D as oe,e as de,r as h,s as ne,C as F,E as re,l as ie,q as ue,c as w,a as d,b as e,w as t,g as a,F as q,i as me,o as g,m as c,d as i,t as A,x as fe,f as $,h as _e}from"./qg68g3Ym.js";import{u as ce}from"./p0r3EQlb.js";import{L as pe}from"./B7XZuiwR.js";import"./CPYLdFy8.js";import"./K4mxSTIr.js";import"./CZ-43qDQ.js";import"./BDnat4bi.js";import"./MuqVyNMF.js";import"./DBGsIv44.js";import"./CXAladg1.js";import"./B6XzT2dZ.js";import"./ymUjhs8s.js";import"./Bjp2U9BR.js";import"./CeVFgQ6p.js";import"./BfZAl00a.js";import"./icFVUt9b.js";import"./CVDjTR8R.js";const ve=V({name:_().required().label("Company name"),short_name:_().required().label("Company short name"),email:_().email().required().label("Email"),address:V({street:_().required().label("Street name"),address:_().required().label("Address name"),city:_().required().label("City"),state:_().required().label("State"),zipCode:_().required().label("ZipCode"),countryId:_().required().label("Country")}).required().label("Address"),phone:_().required().label("Phone number"),vat_registered:oe().required().label("Is company registered on VAT"),pan_no:_().when("vat_registered",{is:void 0,then:p=>p.required(),otherwise:p=>p.notRequired()}).label("PAN number"),vat_no:_().when("vat_registered",{is:!0,then:p=>p.required(),otherwise:p=>p.notRequired()}).label("VAT number"),image:_().label("Company logo")}),xe={class:"self-center mb-16"},ge={class:"flex flex-col gap-4"},ye={class:"flex gap-4"},be={class:"w-1/2"},Ce={class:"w-1/2"},Ve={class:"flex gap-4"},he={class:"w-1/3"},Fe={class:"w-1/3"},we={class:"w-1/3"},qe={class:"w-1/3"},Ae={class:"flex gap-4"},$e={class:"w-1/2"},Se={class:"w-1/2"},Ie={class:"text-right"},aa=de({__name:"company",setup(p){ce({title:"Change company details"});const n=h(null),v=h(!1),{company:o,countries:S}=ne(F()),{saveCompany:I}=F(),k=re(()=>me(o.value?.logo?.file_name)),E=async x=>{v.value=!0,await I(x),v.value=!1},N=x=>{const s=x.target.files;if(!s)return;const r=new FileReader;s[0]&&(r.readAsDataURL(s[0]),r.onload=()=>{n.value?.setFieldValue("image",r.result)})},b=()=>{n.value&&o.value&&(n.value.setFieldValue("id",o.value.id),n.value.setFieldValue("short_name",o.value.short_name),n.value.setFieldValue("name",o.value.name),n.value.setFieldValue("email",o.value.email),n.value.setFieldValue("phone",o.value.phone),n.value.setFieldValue("vat_no",o.value.vat_no),n.value.setFieldValue("pan_no",o.value.pan_no),n.value.setFieldValue("vat_registered",o.value.vat_registered??!1),o.value?.address&&(n.value.setFieldValue("address.address",o.value.address.address),n.value.setFieldValue("address.street",o.value.address.street),n.value.setFieldValue("address.state",o.value.address.state),n.value.setFieldValue("address.city",o.value.address.city),n.value.setFieldValue("address.zipCode",o.value.address.zipCode),n.value.setFieldValue("address.countryId",o.value.address.countryId)))};return ie(()=>{o.value&&b()}),ue(()=>{b()}),(x,s)=>{const r=Z,T=J,z=K,L=G,m=Q,P=Y,B=X,R=ae,U=ee,D=W,H=se,j=te;return g(),w(q,null,[s[15]||(s[15]=d("div",{class:"text-sm mb-4"},[d("h1",{class:"text-black text-xl"},"Company details"),d("p",null,"Enter your personal details below to update your account information.")],-1)),e(a(le),{class:"flex flex-col gap-5",onSubmit:E,ref_key:"form",ref:n,"validation-schema":a(ve)},{default:t(({values:M})=>[e(a(u),{name:"id"},{default:t(({field:l})=>[e(r,c({type:"hidden"},l,{"model-value":a(o)?.id}),null,16,["model-value"])]),_:1}),d("label",xe,[e(L,{class:"w-[180px] h-[180px] bg-gray-300"},{default:t(()=>[e(T,{src:M.image||a(k)||"",class:"object-contain p-3"},null,8,["src"]),e(z,{class:"text-4xl"},{default:t(()=>[i(A(a(O)(a(o)?.name??"")),1)]),_:1})]),_:2},1024),d("input",{type:"file",onChange:N,class:"sr-only",accept:"image/*"},null,32)]),e(a(u),{name:"name",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(m,{for:"cf__name"},{default:t(()=>[...s[0]||(s[0]=[i("Name of company",-1)])]),_:1}),e(r,c(l,{id:"cf__name",autocomplete:"off"}),null,16),e(a(f),{name:"name"})]),_:1}),e(a(u),{name:"short_name",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(m,{for:"cf__short_name"},{default:t(()=>[...s[1]||(s[1]=[i("Company short name",-1)])]),_:1}),e(r,c(l,{id:"cf__short_name",autocomplete:"off"}),null,16),e(a(f),{name:"short_name"})]),_:1}),e(a(u),{name:"email",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(m,{for:"cf__email"},{default:t(()=>[...s[2]||(s[2]=[i("Email address",-1)])]),_:1}),e(r,c({type:"email"},l,{id:"cf__email",autocomplete:"off"}),null,16),e(a(f),{name:"email"})]),_:1}),d("fieldset",ge,[s[9]||(s[9]=d("legend",null,"Company Address",-1)),d("div",ye,[d("div",be,[e(a(u),{as:"div",name:"address.address",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(m,{for:"cf__address"},{default:t(()=>[...s[3]||(s[3]=[i("Address",-1)])]),_:1}),e(r,c({id:"cf__address"},l,{max:"16"}),null,16),e(a(f),{name:"address.address"})]),_:1})]),d("div",Ce,[e(a(u),{as:"div",name:"address.street",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(m,{for:"cf__street"},{default:t(()=>[...s[4]||(s[4]=[i("Street name",-1)])]),_:1}),e(r,c({id:"cf__street"},l),null,16),e(a(f),{name:"address.street"})]),_:1})])]),d("div",Ve,[d("div",he,[e(a(u),{as:"div",name:"address.city",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(m,{for:"cf__city"},{default:t(()=>[...s[5]||(s[5]=[i("City",-1)])]),_:1}),e(r,c({id:"cf__city"},l,{max:"16"}),null,16),e(a(f),{name:"address.city"})]),_:1})]),d("div",Fe,[e(a(u),{as:"div",name:"address.zipCode",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(m,{for:"cf__zipCode"},{default:t(()=>[...s[6]||(s[6]=[i("Zip code",-1)])]),_:1}),e(r,c({id:"cf__zipCode"},l,{max:"16"}),null,16),e(a(f),{name:"address.zipCode"})]),_:1})]),d("div",we,[e(a(u),{as:"div",name:"address.state",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(m,{for:"cf__state"},{default:t(()=>[...s[7]||(s[7]=[i("State",-1)])]),_:1}),e(r,c({id:"cf__state"},l,{max:"16"}),null,16),e(a(f),{name:"address.state"})]),_:1})]),d("div",qe,[e(a(u),{as:"div",name:"address.countryId",class:"flex flex-col gap-2"},{default:t(({field:l,handleChange:y})=>[e(m,{for:"cf__country"},{default:t(()=>[...s[8]||(s[8]=[i("Country",-1)])]),_:1}),e(D,{onChange:y,"model-value":l.value,id:"cf__country"},{default:t(()=>[e(B,null,{default:t(()=>[e(P,{placeholder:"Country"})]),_:1}),e(U,null,{default:t(()=>[(g(!0),w(q,null,fe(a(S),C=>(g(),$(R,{value:C.id},{default:t(()=>[i(A(C.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:2},1032,["onChange","model-value"]),e(a(f),{name:"address.countryId"})]),_:1})])])]),e(a(u),{name:"phone",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(m,{for:"cf__phone"},{default:t(()=>[...s[10]||(s[10]=[i("Phone",-1)])]),_:1}),e(r,c({type:"text"},l,{id:"cf__phone",autocomplete:"off"}),null,16),e(a(f),{name:"phone"})]),_:1}),e(a(u),{name:"vat_registered"},{default:t(({handleChange:l,value:y})=>[e(m,{class:"flex gap-2"},{default:t(()=>[e(H,{"model-value":y,"default-value":!1,"onUpdate:modelValue":l},null,8,["model-value","onUpdate:modelValue"]),s[11]||(s[11]=d("span",null,"Is your company registered on VAT?",-1))]),_:2},1024),e(a(f),{name:"vat_registered"})]),_:1}),d("div",Ae,[d("div",$e,[e(a(u),{name:"vat_no",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(m,{for:"cf__vat"},{default:t(()=>[...s[12]||(s[12]=[i("VAT - Value Added Tax",-1)])]),_:1}),e(r,c({type:"text"},l,{id:"cf__vat",autocomplete:"off"}),null,16),e(a(f),{name:"vat_no"})]),_:1})]),d("div",Se,[e(a(u),{name:"pan_no",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(m,{for:"cf__pan"},{default:t(()=>[...s[13]||(s[13]=[i("PAN - Permanent Address Number",-1)])]),_:1}),e(r,c({type:"text"},l,{id:"cf__pan",autocomplete:"off"}),null,16),e(a(f),{name:"pan_no"})]),_:1})])]),d("div",Ie,[e(j,{variant:"secondary",type:"submit",class:"w-[180px]",disabled:a(v)},{default:t(()=>[a(v)?(g(),$(a(pe),{key:0,class:"animate-spin relative"})):_e("",!0),s[14]||(s[14]=i(" Update details ",-1))]),_:1},8,["disabled"])])]),_:1},8,["validation-schema"])],64)}}});export{aa as default};

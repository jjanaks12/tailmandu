import{i as h,r as x}from"./DHK_nE_D.js";import{m as y}from"./BWYtlrHP.js";import{g}from"./MmWKOBWl.js";let f=0;function w(){y(e=>{if(!h)return;const t=document.querySelectorAll("[data-reka-focus-guard]");document.body.insertAdjacentElement("afterbegin",t[0]??m()),document.body.insertAdjacentElement("beforeend",t[1]??m()),f++,e(()=>{f===1&&document.querySelectorAll("[data-reka-focus-guard]").forEach(a=>a.remove()),f--})})}function m(){const e=document.createElement("span");return e.setAttribute("data-reka-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}function C(e){const t=x("",1e3);return{search:t,handleTypeaheadSearch:(u,d)=>{t.value=t.value+u;{const o=g(),c=d.map(n=>({...n,textValue:n.value?.textValue??n.ref.textContent?.trim()??""})),s=c.find(n=>n.ref===o),r=c.map(n=>n.textValue),p=A(r,t.value,s?.textValue),i=c.find(n=>n.textValue===p);return i&&i.ref.focus(),i?.ref}},resetTypeahead:()=>{t.value=""}}}function v(e,t){return e.map((a,l)=>e[(t+l)%e.length])}function A(e,t,a){const u=t.length>1&&Array.from(t).every(r=>r===t[0])?t[0]:t,d=a?e.indexOf(a):-1;let o=v(e,Math.max(d,0));u.length===1&&(o=o.filter(r=>r!==a));const s=o.find(r=>r.toLowerCase().startsWith(u.toLowerCase()));return s!==a?s:void 0}export{C as a,w as u};

import{_ as tt}from"./BRiKR8X3.js";import{u as et,_ as ot}from"./DhmB0p6i.js";import{_ as at,a as st,b as nt,c as lt,d as rt,e as it}from"./C0dHp-LP.js";import{_ as _t,a as mt,b as ut}from"./srK4LSmb.js";import{_ as ct}from"./D-lqA9Xr.js";import{_ as pt}from"./DTXbyeut.js";import{e as A,E as ft,c as d,o as _,b as t,a as p,w as e,g as a,i as dt,d as s,t as c,f as k,h as v,I as gt,r as D,J as vt,l as $t,K as xt,L as bt,ai as wt,s as kt,p as Ct,F as w,n as yt,v as T}from"./D91ZHywZ.js";import{a as Dt}from"./CZanlJpN.js";import{_ as St,a as ht,b as Mt,c as Tt}from"./4qk9AQyh.js";import{_ as Ut}from"./Vx34VY59.js";import{_ as At,a as It}from"./Cpn8zw38.js";import{_ as Pt,a as Bt,b as Ft,c as Nt,d as Et,e as Vt}from"./BHrkuMiQ.js";import{_ as jt,a as Lt,b as Rt,c as Ht}from"./DEI2u2wC.js";import{a as qt,F as zt}from"./ZkvbBL6y.js";import{_ as Ot}from"./DD3pvnGZ.js";import{u as Gt}from"./Dnv01NYR.js";import{S as Jt}from"./CgxmTvS7.js";import{S as Kt}from"./C_n9yJXY.js";import{E as Qt}from"./BWzqUCLw.js";import{S as Wt}from"./q7Vdmde_.js";import"./CPYLdFy8.js";import"./C6WeEH23.js";import"./DWuPLQul.js";import"./DQi6vIwO.js";import"./Dx2IEVPb.js";import"./pHE_q5Bf.js";import"./tyVI4G7T.js";import"./Cr-WXHeO.js";import"./C6Y-ieo6.js";import"./BKdb_-kR.js";import"./BbQbYEYN.js";import"./DW-ZThka.js";import"./CobRy8jT.js";import"./Zdgt8dj4.js";import"./BuVCCK0o.js";import"./CSd0lPZ1.js";import"./B5eRpmlm.js";import"./DfwiDdUj.js";import"./DSUeS1s3.js";import"./nrtRkyax.js";import"./BaAlJv6F.js";import"./B7Cs89h8.js";import"./ClQ6K9pm.js";import"./B3voQtWI.js";import"./CjUBKsF-.js";const Xt={class:"flex items-center gap-2"},Yt={class:"flex-grow"},Zt={class:"not-italic block"},te=A({__name:"UserInfo",props:{user:{}},setup(l){const f=l,m=ft(()=>[f.user?.personal?.first_name,f.user?.personal?.middle_name,f.user?.personal?.last_name].join(" ").trim());return(r,g)=>{const i=mt,n=ut,S=_t,o=ct,C=pt;return _(),d("div",Xt,[t(S,{class:"w-[60px] h-[60px]"},{default:e(()=>[t(i,{src:a(dt)(l.user?.personal?.avatar?.file_name),class:"object-cover"},null,8,["src"]),t(n,null,{default:e(()=>[s(c(a(Dt)(a(m))),1)]),_:1})]),_:1}),p("div",Yt,[t(o,{to:`/dashboard/users?id=${l.user.id}`,class:"hover:underline"},{default:e(()=>[s(c(a(m)),1)]),_:1},8,["to"]),p("em",Zt,c(l.user.personal?.email),1),l.user.role?(_(),k(C,{key:0,variant:"secondary"},{default:e(()=>[s(c(l.user?.role?.name),1)]),_:1})):v("",!0)])])}}}),U=gt("users",()=>{const l=D([]),{isLoading:f,params:m}=vt(),{axios:r}=$t(),g=async()=>{const{data:{data:i,...n}}=await r.get("/users",{params:m.value});l.value=i,m.value=n,l.value=i};return xt(m,(i,n)=>{bt(i,n)||g()}),{users:l,isLoading:f,params:m,fetch:g}}),ee={class:"flex gap-4 mb-20"},oe={class:"flex-grow"},ae={class:"flex gap-2 mb-4"},se={key:0,class:"flex items-center justify-end space-x-2 py-4"},ne={class:"flex-1 text-sm text-muted-foreground"},le={class:"space-x-2"},re={key:0},Ze=A({__name:"index",setup(l){Gt({title:"Contacts"});const{public:{mailAdmin:f}}=wt(),{users:m,params:r}=kt(U()),{fetch:g}=U();et();const i=D(!1),n=D(null);return Ct(()=>{g()}),(S,o)=>{const C=tt,h=ot,$=lt,M=nt,I=st,x=it,P=te,B=ht,F=At,N=It,E=Tt,V=Ut,j=Mt,L=St,R=rt,H=at,q=Ft,z=Nt,O=Et,G=Vt,J=Bt,K=Pt,Q=Rt,W=Ht,X=Lt,Y=jt;return _(),d(w,null,[p("div",ee,[p("div",oe,[p("div",ae,[t(a(Jt)),o[3]||(o[3]=s(" Filters ",-1))])]),t(a(zt),{class:"max-w-[320px] w-full flex items-center gap-2"},{default:e(()=>[t(a(qt),{name:"search"},{default:e(({field:u})=>[t(C,yt(u,{placeholder:"Search users"}),null,16)]),_:1}),t(h,{variant:"secondary",size:"lg"},{default:e(()=>[t(a(Kt))]),_:1})]),_:1})]),t(H,null,{default:e(()=>[t(I,null,{default:e(()=>[t(M,null,{default:e(()=>[t($,null,{default:e(()=>[...o[4]||(o[4]=[s("SN",-1)])]),_:1}),t($,null,{default:e(()=>[...o[5]||(o[5]=[s("User",-1)])]),_:1}),t($,null,{default:e(()=>[...o[6]||(o[6]=[s("Status",-1)])]),_:1}),t($,{class:"text-right"},{default:e(()=>[...o[7]||(o[7]=[s("Action",-1)])]),_:1})]),_:1})]),_:1}),t(R,null,{default:e(()=>[(_(!0),d(w,null,T(a(m),(u,y)=>(_(),k(M,null,{default:e(()=>[t(x,null,{default:e(()=>[s(c(y+1),1)]),_:2},1024),t(x,null,{default:e(()=>[t(P,{user:u},null,8,["user"])]),_:2},1024),t(x),t(x,{class:"text-right"},{default:e(()=>[u.personal.email!=a(f)?(_(),k(L,{key:0},{default:e(()=>[t(B,{"as-child":""},{default:e(()=>[t(h,{modifier:"outline"},{default:e(()=>[t(a(Qt))]),_:1})]),_:1}),t(j,{class:"w-56"},{default:e(()=>[t(V,null,{default:e(()=>[t(F,null,{default:e(()=>[...o[8]||(o[8]=[s("Actions",-1)])]),_:1}),t(N),t(E,{onClick:()=>{i.value=!0,n.value=u}},{default:e(()=>[t(a(Wt)),o[9]||(o[9]=p("span",null,"Change role",-1))]),_:1},8,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),a(r).total_page>1?(_(),d("div",se,[p("div",ne,c(a(r)?.current)+" of "+c(a(r)?.total_page)+" pages ",1),p("div",le,[t(K,{"items-per-page":a(r).per_page,total:a(r).total,"default-page":a(r).current,"onUpdate:page":o[0]||(o[0]=u=>{r.value={...a(r),current:u}})},{default:e(({page:u})=>[t(J,null,{default:e(({items:y})=>[t(q),(_(!0),d(w,null,T(y,(b,Z)=>(_(),d(w,{key:Z},[b.type==="page"?(_(),k(z,{key:0,value:b.value,"is-active":b.value===u},{default:e(()=>[s(c(b.value),1)]),_:2},1032,["value","is-active"])):v("",!0)],64))),128)),t(O,{index:4}),t(G)]),_:2},1024)]),_:1},8,["items-per-page","total","default-page"])])])):v("",!0),t(Y,{open:a(i),"onUpdate:open":o[2]||(o[2]=()=>{i.value=!1,n.value=null})},{default:e(()=>[t(X,{class:"bg-white"},{default:e(()=>[t(Q,null,{default:e(()=>[o[10]||(o[10]=s(" Update ",-1)),a(n)?.personal?.first_name?(_(),d("span",re,c(a(n)?.personal?.first_name)+"'s",1)):v("",!0),o[11]||(o[11]=s(" role ",-1))]),_:1}),t(W,null,{default:e(()=>[...o[12]||(o[12]=[s("Change role of users",-1)])]),_:1}),t(Ot,{user:a(n),onUpdate:o[1]||(o[1]=()=>{i.value=!1,n.value=null,a(g)()})},null,8,["user"])]),_:1})]),_:1},8,["open"])],64)}}});export{Ze as default};

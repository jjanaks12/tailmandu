import{_ as ae}from"./CqJy5Exi.js";import{_ as se}from"./KnfxygQr.js";import{_ as le,a as oe,b as ne,c as re,d as ie}from"./BNgGaryp.js";import{_ as de}from"./qg7Sj3pz.js";import{_ as me,a as ue,b as ce}from"./DPo0dgS7.js";import{_ as fe}from"./Dc14EJ-Z.js";import{S as _e}from"./ov1OHel-.js";import{c as pe}from"./CPYLdFy8.js";import{e as Y,R as ge,f as w,o as n,n as h,g as s,s as ye,C as xe,u as ve,z as he,r as O,E as z,p as be,c as u,b as e,w as a,a as l,h as C,t as v,d as r,F as S,v as E,y as we,i as ke,am as Ve,an as Se,B as Re,x as D}from"./CQTPwDMt.js";import{a as f,E as c,F as Ce}from"./B7w6sks-.js";import{_ as $e,$ as Ue}from"./2l_uslt0.js";import{U as Q}from"./Cxrphwre.js";import{M as Fe,P as ze,F as Ee}from"./BCebKaob.js";import{C as Ie}from"./C391etfF.js";import{U as Pe,T as W,I as Ae}from"./BkNrFocb.js";import{X as Ne}from"./m_3sjnvK.js";import{L as Te}from"./D_PCmc_n.js";const Le=Y({__name:"Separator",props:{orientation:{default:"horizontal"},decorative:{type:Boolean,default:!0},asChild:{type:Boolean},as:{},class:{}},setup(x){const y=x,I=ge(y,"class");return(L,B)=>(n(),w(s(_e),h({"data-slot":"separator-root"},s(I),{class:s(pe)("bg-border shrink-0 data-[orientation=horizontal]:h-px data-[orientation=horizontal]:w-full data-[orientation=vertical]:h-full data-[orientation=vertical]:w-px",y.class)}),null,16,["class"]))}}),Be={key:0,class:"max-w-4xl mx-auto p-6 space-y-8"},Me={class:"bg-white rounded-3xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden"},je={class:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-6 border-b border-gray-200"},Oe={class:"flex items-center gap-3"},De={class:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 text-blue-600"},Qe={class:"text-xl font-semibold text-gray-900"},We={class:"p-8 space-y-6"},Ye={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},qe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ge={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},He={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Je={class:"flex gap-4"},Xe={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ke={key:0,class:"bg-white text-gray-500 rounded-3xl border border-gray-200 shadow-sm p-8"},Ze={class:"text-2xl font-light mb-2"},et={class:"text-primary font-bold"},tt={class:"flex items-center justify-between gap-6 pb-5"},at={class:"grow space-y-3"},st={class:"text-gray-600 block not-italic text-2xl"},lt={class:"flex items-center gap-2 rounded-lg overflow-hidden border border-gray-200 relative"},ot={key:0},nt=["src"],rt={key:1,class:"w-full flex flex-col gap-2 p-4"},it={class:"w-1/2 text-sm space-y-1 border border-gray-200 p-4 rounded-lg"},dt=["src"],mt={key:1},ut={key:2,class:"text-center flex flex-col justify-center items-center"},ct={class:"bg-white rounded-3xl border border-gray-200 shadow-sm p-8"},ft={class:"flex flex-col sm:flex-row items-center justify-between gap-6"},_t={class:"text-center sm:text-left"},pt={class:"text-gray-600 text-sm"},gt={key:1},yt={key:2},xt={key:1,class:"bg-gray-50 text-gray-600 text-center border border-gray-300 p-8 rounded-xl"},Nt=Y({__name:"registrationForm",props:{eventId:{},mode:{},trailRace:{}},setup(x){const y=x,{countries:I,genders:L,company:B}=ye(xe()),{saveVoluteer:q,saveRunner:G}=ve(),P=he(),p=O(null),k=O(!1),A=z(()=>y.trailRace.stages.map(i=>i.stage_categories.filter(t=>D(t.end).isAfter(D())).length>0?i:null).filter(i=>i!==null)),M=z(()=>A.value.find(i=>i.id===p.value?.values.stage_id)?.stage_categories),j=z(()=>M.value?.find(i=>i.id===p.value?.values.stage_category_id)),N=z(()=>{const i=p.value?.values.country_id==B.value?.address.country_id?"NATIONAL":"INTERNATIONAL";return p.value?.setFieldValue("payment_type",i),j.value?.payment.find(t=>t.type===i)??{}}),H=async i=>{try{k.value=!0,y.mode=="volunteer"?await q(i,y.trailRace.id):await G(i,y.trailRace.id),Re(`/races/${P.params.slug}`)}catch(t){console.log(t)}finally{k.value=!1}},J=i=>{const d=i.target.files?.[0];if(d){const g=new FileReader;g.onload=V=>{const b=V.target?.result;b&&(p.value?.setFieldValue("payment_method","QR"),p.value?.setFieldValue("payment_screenshot",b))},g.readAsDataURL(d)}};return be(()=>{setTimeout(()=>{P.query.stage_id&&p.value?.setFieldValue("stage_id",P.query.stage_id)},1e3)}),(i,t)=>{const d=ae,g=se,V=ne,b=oe,$=ie,U=re,F=le,X=de,K=ue,Z=ce,ee=me,T=fe,te=Le;return A.value.length>0?(n(),u("section",Be,[e(s(Ce),{ref_key:"form",ref:p,class:"space-y-8","validation-schema":x.mode=="runner"?s(Ve):s(Se),onSubmit:H},{default:a(({values:R})=>[l("div",Me,[l("div",je,[l("div",Oe,[l("div",De,[e(s(Q),{size:20})]),l("div",null,[l("h2",Qe,v(y.mode==="volunteer"?"Volunteer Information":"Runner Information"),1),t[2]||(t[2]=l("p",{class:"text-sm text-gray-600"},"Tell us about yourself",-1))])])]),l("div",We,[l("div",Ye,[e(s(f),{name:"first_name",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{for:"rf__first_name",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(Q),{size:16,class:"text-gray-400"}),t[3]||(t[3]=r(" First name ",-1))]),_:1}),e(g,h({id:"rf__first_name"},o,{placeholder:"Enter your first name",autocomplete:"given-name",class:"h-12 text-base"}),null,16),e(s(c),{name:"first_name"})]),_:1}),e(s(f),{name:"middle_name",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{for:"rf__middle_name",class:"text-sm font-medium text-gray-700"},{default:a(()=>[...t[4]||(t[4]=[r(" Middle name ",-1),l("span",{class:"text-gray-400 text-xs"},"(optional)",-1)])]),_:1}),e(g,h({id:"rf__middle_name"},o,{placeholder:"Middle name",class:"h-12 text-base"}),null,16),e(s(c),{name:"middle_name"})]),_:1}),e(s(f),{name:"last_name",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{for:"rf__last_name",class:"text-sm font-medium text-gray-700"},{default:a(()=>[...t[5]||(t[5]=[r(" Last name ",-1)])]),_:1}),e(g,h({id:"rf__last_name"},o,{placeholder:"Enter your last name",autocomplete:"family-name",class:"h-12 text-base"}),null,16),e(s(c),{name:"last_name"})]),_:1})]),l("div",qe,[e(s(f),{name:"email",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{for:"rf__email",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(Fe),{size:16,class:"text-gray-400"}),t[6]||(t[6]=r(" Email address ",-1))]),_:1}),e(g,h({id:"rf__email",type:"email"},o,{placeholder:"your.email@example.com",autocomplete:"email",class:"h-12 text-base"}),null,16),e(s(c),{name:"email"})]),_:1}),e(s(f),{name:"phone_number",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(ze),{size:16,class:"text-gray-400"}),t[7]||(t[7]=r(" Phone number ",-1))]),_:1}),e(g,h({type:"tel"},o,{placeholder:"xxxxxxxxxx",autocomplete:"tel",class:"h-12 text-base"}),null,16),e(s(c),{name:"phone_number"})]),_:1})]),l("div",Ge,[e(s(f),{name:"date_of_birth",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(Ie),{size:16,class:"text-gray-400"}),t[8]||(t[8]=r(" Date of birth ",-1))]),_:1}),e($e,{Label:"Select your birth date","model-value":o.value?s(Ue)(o.value):void 0,"onUpdate:modelValue":_=>_?o.onChange(_.toString()):void 0},null,8,["model-value","onUpdate:modelValue"]),e(s(c),{name:"date_of_birth"})]),_:1})]),l("div",He,[e(s(f),{name:"country_id",as:"div",class:"space-y-2"},{default:a(({value:o,handleChange:_})=>[e(d,{class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(Ee),{size:16,class:"text-gray-400"}),t[9]||(t[9]=r(" Country ",-1))]),_:1}),e(F,{"model-value":String(o??""),"onUpdate:modelValue":_},{default:a(()=>[e(b,{class:"w-full h-12"},{default:a(()=>[e(V,{placeholder:"Select country"})]),_:1}),e(U,null,{default:a(()=>[(n(!0),u(S,null,E(s(I),m=>(n(),w($,{key:m.id,value:String(m.id)},{default:a(()=>[r(v(m.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"]),e(s(c),{name:"country_id"})]),_:1}),e(s(f),{name:"gender_id",as:"div",class:"space-y-2"},{default:a(({value:o,handleChange:_})=>[e(d,{class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(Pe),{size:16,class:"text-gray-400"}),t[10]||(t[10]=r(" Gender ",-1))]),_:1}),e(F,{"model-value":o,"onUpdate:modelValue":_},{default:a(()=>[e(b,{class:"w-full h-12"},{default:a(()=>[e(V,{placeholder:"Select gender"})]),_:1}),e(U,null,{default:a(()=>[(n(!0),u(S,null,E(s(L),m=>(n(),w($,{key:m.id,value:String(m.id)},{default:a(()=>[r(v(m.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"]),e(s(c),{name:"gender_id"})]),_:1})]),l("div",Je,[e(s(f),{name:"stage_id",as:"div",class:we({"space-y-2":!0,"w-1/2":x.mode==="runner","w-full":x.mode==="volunteer"})},{default:a(({value:o,handleChange:_})=>[e(d,{class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(W),{size:16,class:"text-gray-400"}),t[11]||(t[11]=r(" Stage ",-1))]),_:1}),e(F,{"model-value":o,"onUpdate:modelValue":_},{default:a(()=>[e(b,{class:"w-full h-12 disabled:opacity-50 disabled:cursor-not-allowed"},{default:a(()=>[e(V,{placeholder:"Choose your stage"})]),_:1}),e(U,null,{default:a(()=>[(n(!0),u(S,null,E(A.value,m=>(n(),w($,{key:m.id,value:String(m.id)},{default:a(()=>[r(v(m.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:1},8,["model-value","onUpdate:modelValue"]),e(s(c),{name:"stage_id"})]),_:1},8,["class"]),x.mode==="runner"?(n(),w(s(f),{key:0,name:"stage_category_id",as:"div",class:"w-1/2 space-y-2"},{default:a(({value:o,handleChange:_})=>[e(d,{class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(s(W),{size:16,class:"text-gray-400"}),t[12]||(t[12]=r(" Stage Category ",-1))]),_:1}),e(F,{"model-value":o,"onUpdate:modelValue":_},{default:a(()=>[e(b,{class:"w-full h-12 disabled:opacity-50 disabled:cursor-not-allowed"},{default:a(()=>[e(V,{placeholder:p.value?.values?.stage_id?"Choose your stage catgeory":"Select an stage first"},null,8,["placeholder"])]),_:2},1024),e(U,null,{default:a(()=>[(n(!0),u(S,null,E(M.value,m=>(n(),w($,{key:m.id,value:String(m.id)},{default:a(()=>[r(v(m.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"]),e(s(c),{name:"stage_category_id"})]),_:2},1024)):C("",!0)]),x.mode=="runner"?(n(),u(S,{key:0},[e(s(f),{name:"description.club_name",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{for:"rf__description.club_name",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[...t[13]||(t[13]=[r(" Club name ",-1)])]),_:1}),e(g,h(o,{id:"rf__description.club_name",placeholder:"Name of club you belong to"}),null,16),e(s(c),{name:"description.club_name"})]),_:1}),l("div",Xe,[e(s(f),{name:"description.emergency_contact_name",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{id:"rf__emergency_contact_name",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[...t[14]||(t[14]=[r(" Emergency contact name ",-1)])]),_:1}),e(g,h(o,{placeholder:"In case of emergency"}),null,16),e(s(c),{name:"description.emergency_contact_name"})]),_:1}),e(s(f),{name:"description.emergency_contact_phone",as:"div",class:"space-y-2"},{default:a(({field:o})=>[e(d,{id:"rf__emergency_contact_phone",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[...t[15]||(t[15]=[r(" Emergency contact phone ",-1)])]),_:1}),e(g,h(o,{placeholder:"In case of emergency"}),null,16),e(s(c),{name:"description.emergency_contact_phone"})]),_:1})]),e(s(f),{name:"description.want_lunch",as:"div",class:"space-y-2"},{default:a(({value:o,handleChange:_})=>[e(d,{id:"rf__want_lunch",class:"flex items-start gap-2"},{default:a(()=>[e(X,{"model-value":o,"onUpdate:modelValue":_,"default-value":!1},null,8,["model-value","onUpdate:modelValue"]),t[16]||(t[16]=l("div",{class:"grow flex flex-col gap-2"},[l("span",{class:"font-medium text-gray-700"},"I want to order lunch after race."),l("em",{class:"text-sm font-light not-italic"},"Please Note*: Lunch is only provided to those who pre- ordered and pre-paid which is 480 per person and not included in registration fee.")],-1))]),_:2},1024),e(s(c),{name:"description.want_lunch"})]),_:1})],64)):C("",!0)])]),x.mode=="runner"&&Object.keys(N.value).length>0?(n(),u("div",Ke,[l("h3",Ze,[t[17]||(t[17]=r(" Registration fees for ",-1)),l("span",et,v(j.value?.name),1)]),!R.payment_method||R.payment_method=="QR"?(n(),u(S,{key:0},[l("div",tt,[l("div",at,[l("em",st,"NPR "+v(N.value?.amount),1),t[21]||(t[21]=l("p",null,"Please make payment to this QR code and upload your screenshot. We verify from the screenshot. We will contact you as soon as possible.",-1)),e(ee,{variant:"info"},{default:a(()=>[e(s(Ae)),e(K,null,{default:a(()=>[...t[18]||(t[18]=[r("Payment",-1)])]),_:1}),e(Z,null,{default:a(()=>[...t[19]||(t[19]=[r("If you are international personal, Just upload the screenshot of the conversation. We will handle the payment at venue.",-1)])]),_:1})]),_:1}),l("label",lt,[l("input",{type:"file",onChange:J,class:"hidden"},null,32),R?.payment_screenshot?(n(),u("figure",ot,[l("img",{src:R?.payment_screenshot,alt:"Payment screenshot",class:"w-full h-auto"},null,8,nt),e(T,{class:"absolute top-2 right-2",onClick:t[0]||(t[0]=o=>p.value?.setFieldValue("payment_screenshot",""))},{default:a(()=>[e(s(Ne),{class:"w-6 h-6"})]),_:1})])):(n(),u("div",rt,[...t[20]||(t[20]=[l("span",{class:"text-sm"},"You can upload your screenshot here...",-1),l("p",{class:"text-xs"},"File size should be less than 2MB",-1)])]))])]),l("figure",it,[t[22]||(t[22]=l("figcaption",null,"Here is the payment QR code",-1)),l("img",{src:s(ke)(N.value?.screenshot?.file_name),alt:"Payment screenshot",class:"w-full h-auto"},null,8,dt)])]),e(s(c),{name:"payment_method"}),e(te)],64)):C("",!0),R.payment_method==="PAY_AT_VENUE"?(n(),u("p",mt,"Got it! We will remind you to pay cash when you arrive at the event.")):(n(),u("div",ut,[t[24]||(t[24]=l("span",{class:"bg-white text-gray-600 text-lg font-bold uppercase -translate-y-1/2 px-2"},"Or",-1)),t[25]||(t[25]=l("p",null,"You can also choose to pay in cash when you arrive at the event.",-1)),e(T,{type:"button",onClick:t[1]||(t[1]=o=>p.value?.setFieldValue("payment_method","PAY_AT_VENUE")),class:"mt-2"},{default:a(()=>[...t[23]||(t[23]=[r(" Pay at venue ",-1)])]),_:1})]))])):C("",!0),l("div",ct,[l("div",ft,[l("div",_t,[t[26]||(t[26]=l("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Ready to register?",-1)),l("p",pt,v(y.mode==="volunteer"?"Complete your volunteer registration and join our team!":"Submit your registration and get ready for the race!"),1)]),e(T,{variant:"secondary",type:"submit",class:"w-full sm:w-auto px-8 py-3 h-12 text-base font-medium",disabled:k.value,"aria-busy":k.value},{default:a(()=>[k.value?(n(),w(s(Te),{key:0,size:20,class:"animate-spin mr-2"})):C("",!0),k.value?(n(),u("span",yt,"Processing Registration...")):(n(),u("span",gt,v(y.mode==="volunteer"?"Register as Volunteer":"Register as Runner"),1))]),_:1},8,["disabled","aria-busy"])])])]),_:1},8,["validation-schema"])])):(n(),u("div",xt," looks like all the stages are completed "))}}});export{Nt as _};

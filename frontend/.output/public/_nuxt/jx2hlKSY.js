import{_ as Z}from"./BE0w_yTj.js";import{_ as J,a as G,b as K,c as O}from"./kmBNxmyc.js";import{_ as Q}from"./BqiLXIpC.js";import{_ as W,a as X,b as Y,c as ee,d as ae}from"./DVJBaGUp.js";import{_ as se}from"./DJbmSpAf.js";import{_ as te}from"./C30g46ES.js";import{a as m,E as f,F as le}from"./Bk_QNj-T.js";import{i as V,j as _,S as oe,e as de,r as h,s as ne,R as F,v as re,k as ie,B as me,c as w,a as d,b as e,w as t,g as a,F as A,h as ue,o as g,m as c,d as i,t as q,J as fe,f as $,l as _e}from"./DtcwnfPe.js";import{u as ce}from"./bLA7xXrm.js";import{L as pe}from"./CUU-NN3s.js";import"./CBfrqCZ4.js";import"./9BNrv0sW.js";import"./CRk6R3Kp.js";import"./C77EKNVI.js";import"./OlCaFKwb.js";import"./auehYMrn.js";import"./vVQyPDux.js";import"./DmyfRh01.js";import"./BAx2kpLI.js";import"./CcPnVmeR.js";import"./DJMzHe9L.js";import"./CHIgUVhi.js";import"./DAPt4HuA.js";import"./KVlfMEK2.js";import"./CxHr1n6F.js";import"./DrFvtmkD.js";const ve=V({name:_().required().label("Company name"),short_name:_().required().label("Company short name"),email:_().email().required().label("Email"),address:V({street:_().required().label("Street name"),address:_().required().label("Address name"),city:_().required().label("City"),state:_().required().label("State"),zipCode:_().required().label("ZipCode"),countryId:_().required().label("Country")}).required().label("Address"),phone:_().required().label("Phone number"),vat_registered:oe().required().label("Is company registered on VAT"),pan_no:_().when("vat_registered",{is:void 0,then:p=>p.required(),otherwise:p=>p.notRequired()}).label("PAN number"),vat_no:_().when("vat_registered",{is:!0,then:p=>p.required(),otherwise:p=>p.notRequired()}).label("VAT number"),image:_().label("Company logo")}),xe={class:"self-center mb-16"},ge={class:"flex flex-col gap-4"},ye={class:"flex gap-4"},be={class:"w-1/2"},Ce={class:"w-1/2"},Ve={class:"flex gap-4"},he={class:"w-1/3"},Fe={class:"w-1/3"},we={class:"w-1/3"},Ae={class:"w-1/3"},qe={class:"flex gap-4"},$e={class:"w-1/2"},Se={class:"w-1/2"},Ie={class:"text-right"},ta=de({__name:"company",setup(p){ce({title:"Change company details"});const n=h(null),v=h(!1),{company:o,countries:S}=ne(F()),{saveCompany:I}=F(),k=re(()=>ue(o.value?.logo?.file_name)),N=async x=>{v.value=!0,await I(x),v.value=!1},T=x=>{const s=x.target.files;if(!s)return;const r=new FileReader;s[0]&&(r.readAsDataURL(s[0]),r.onload=()=>{n.value?.setFieldValue("image",r.result)})},b=()=>{n.value&&o.value&&(n.value.setFieldValue("id",o.value.id),n.value.setFieldValue("short_name",o.value.short_name),n.value.setFieldValue("name",o.value.name),n.value.setFieldValue("email",o.value.email),n.value.setFieldValue("phone",o.value.phone),n.value.setFieldValue("vat_no",o.value.vat_no),n.value.setFieldValue("pan_no",o.value.pan_no),n.value.setFieldValue("vat_registered",o.value.vat_registered??!1),o.value?.address&&(n.value.setFieldValue("address.address",o.value.address.address),n.value.setFieldValue("address.street",o.value.address.street),n.value.setFieldValue("address.state",o.value.address.state),n.value.setFieldValue("address.city",o.value.address.city),n.value.setFieldValue("address.zipCode",o.value.address.zipCode),n.value.setFieldValue("address.countryId",o.value.address.countryId)))};return ie(()=>{o.value&&b()}),me(()=>{b()}),(x,s)=>{const r=Z,z=G,E=K,B=J,u=Q,L=Y,P=X,R=ae,U=ee,H=W,j=se,D=te;return g(),w(A,null,[s[15]||(s[15]=d("div",{class:"text-sm mb-4"},[d("h1",{class:"text-black text-xl"},"Company details"),d("p",null,"Enter your personal details below to update your account information.")],-1)),e(a(le),{class:"flex flex-col gap-5",onSubmit:N,ref_key:"form",ref:n,"validation-schema":a(ve)},{default:t(({values:M})=>[e(a(m),{name:"id"},{default:t(({field:l})=>[e(r,c({type:"hidden"},l,{"model-value":a(o)?.id}),null,16,["model-value"])]),_:1}),d("label",xe,[e(B,{class:"w-[180px] h-[180px] bg-gray-300"},{default:t(()=>[e(z,{src:M.image||a(k)||"",class:"object-contain p-3"},null,8,["src"]),e(E,{class:"text-4xl"},{default:t(()=>[i(q(a(O)(a(o)?.name??"")),1)]),_:1})]),_:2},1024),d("input",{type:"file",onChange:T,class:"sr-only",accept:"image/*"},null,32)]),e(a(m),{name:"name",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(u,{for:"cf__name"},{default:t(()=>[...s[0]||(s[0]=[i("Name of company",-1)])]),_:1}),e(r,c(l,{id:"cf__name",autocomplete:"off"}),null,16),e(a(f),{name:"name"})]),_:1}),e(a(m),{name:"short_name",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(u,{for:"cf__short_name"},{default:t(()=>[...s[1]||(s[1]=[i("Company short name",-1)])]),_:1}),e(r,c(l,{id:"cf__short_name",autocomplete:"off"}),null,16),e(a(f),{name:"short_name"})]),_:1}),e(a(m),{name:"email",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(u,{for:"cf__email"},{default:t(()=>[...s[2]||(s[2]=[i("Email address",-1)])]),_:1}),e(r,c({type:"email"},l,{id:"cf__email",autocomplete:"off"}),null,16),e(a(f),{name:"email"})]),_:1}),d("fieldset",ge,[s[9]||(s[9]=d("legend",null,"Company Address",-1)),d("div",ye,[d("div",be,[e(a(m),{as:"div",name:"address.address",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(u,{for:"cf__address"},{default:t(()=>[...s[3]||(s[3]=[i("Address",-1)])]),_:1}),e(r,c({id:"cf__address"},l,{max:"16"}),null,16),e(a(f),{name:"address.address"})]),_:1})]),d("div",Ce,[e(a(m),{as:"div",name:"address.street",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(u,{for:"cf__street"},{default:t(()=>[...s[4]||(s[4]=[i("Street name",-1)])]),_:1}),e(r,c({id:"cf__street"},l),null,16),e(a(f),{name:"address.street"})]),_:1})])]),d("div",Ve,[d("div",he,[e(a(m),{as:"div",name:"address.city",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(u,{for:"cf__city"},{default:t(()=>[...s[5]||(s[5]=[i("City",-1)])]),_:1}),e(r,c({id:"cf__city"},l,{max:"16"}),null,16),e(a(f),{name:"address.city"})]),_:1})]),d("div",Fe,[e(a(m),{as:"div",name:"address.zipCode",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(u,{for:"cf__zipCode"},{default:t(()=>[...s[6]||(s[6]=[i("Zip code",-1)])]),_:1}),e(r,c({id:"cf__zipCode"},l,{max:"16"}),null,16),e(a(f),{name:"address.zipCode"})]),_:1})]),d("div",we,[e(a(m),{as:"div",name:"address.state",class:"flex flex-col gap-2"},{default:t(({field:l})=>[e(u,{for:"cf__state"},{default:t(()=>[...s[7]||(s[7]=[i("State",-1)])]),_:1}),e(r,c({id:"cf__state"},l,{max:"16"}),null,16),e(a(f),{name:"address.state"})]),_:1})]),d("div",Ae,[e(a(m),{as:"div",name:"address.countryId",class:"flex flex-col gap-2"},{default:t(({field:l,handleChange:y})=>[e(u,{for:"cf__country"},{default:t(()=>[...s[8]||(s[8]=[i("Country",-1)])]),_:1}),e(H,{onChange:y,"model-value":l.value,id:"cf__country"},{default:t(()=>[e(P,null,{default:t(()=>[e(L,{placeholder:"Country"})]),_:1}),e(U,null,{default:t(()=>[(g(!0),w(A,null,fe(a(S),C=>(g(),$(R,{value:C.id},{default:t(()=>[i(q(C.name),1)]),_:2},1032,["value"]))),256))]),_:1})]),_:2},1032,["onChange","model-value"]),e(a(f),{name:"address.countryId"})]),_:1})])])]),e(a(m),{name:"phone",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(u,{for:"cf__phone"},{default:t(()=>[...s[10]||(s[10]=[i("Phone",-1)])]),_:1}),e(r,c({type:"text"},l,{id:"cf__phone",autocomplete:"off"}),null,16),e(a(f),{name:"phone"})]),_:1}),e(a(m),{name:"vat_registered"},{default:t(({handleChange:l,value:y})=>[e(u,{class:"flex gap-2"},{default:t(()=>[e(j,{"model-value":y,"default-value":!1,"onUpdate:modelValue":l},null,8,["model-value","onUpdate:modelValue"]),s[11]||(s[11]=d("span",null,"Is your company registered on VAT?",-1))]),_:2},1024),e(a(f),{name:"vat_registered"})]),_:1}),d("div",qe,[d("div",$e,[e(a(m),{name:"vat_no",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(u,{for:"cf__vat"},{default:t(()=>[...s[12]||(s[12]=[i("VAT - Value Added Tax",-1)])]),_:1}),e(r,c({type:"text"},l,{id:"cf__vat",autocomplete:"off"}),null,16),e(a(f),{name:"vat_no"})]),_:1})]),d("div",Se,[e(a(m),{name:"pan_no",class:"flex flex-col gap-1",as:"div"},{default:t(({field:l})=>[e(u,{for:"cf__pan"},{default:t(()=>[...s[13]||(s[13]=[i("PAN - Permanent Address Number",-1)])]),_:1}),e(r,c({type:"text"},l,{id:"cf__pan",autocomplete:"off"}),null,16),e(a(f),{name:"pan_no"})]),_:1})])]),d("div",Ie,[e(D,{variant:"secondary",type:"submit",class:"w-[180px]",disabled:a(v)},{default:t(()=>[a(v)?(g(),$(a(pe),{key:0,class:"animate-spin relative"})):_e("",!0),s[14]||(s[14]=i(" Update details ",-1))]),_:1},8,["disabled"])])]),_:1},8,["validation-schema"])],64)}}});export{ta as default};

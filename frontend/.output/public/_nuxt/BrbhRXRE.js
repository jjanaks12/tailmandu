import{_ as K}from"./BR2D6ioD.js";import{_ as Q}from"./DFoVhR9B.js";import{_ as W,a as Z,b as ee,c as te,d as ae}from"./Cmm6gOyh.js";import{_ as se}from"./Dw4pR65e.js";import{a as _,E as g,F as le}from"./BVwABNE6.js";import{_ as ne,$ as oe}from"./BnSg1Twb.js";import{a3 as de,r as P,e as re,R as ie,s as T,u as me,v as O,c as u,o as d,b as e,w as a,a as o,g as t,t as p,l as $,d as r,m as L,F as V,J as k,f as C}from"./CwoOZn_i.js";import{t as ue}from"./C59bo-ws.js";import{U as D}from"./DTops84b.js";import{M as ce,P as _e,F as ge}from"./Ba3XBoqz.js";import{C as fe}from"./BNqeRhB6.js";import{M as pe,U as j,S as ye,T as ve,L as xe,C as be,a as he}from"./BGJHTx7j.js";const Se=de("registration",()=>{const U=P(!1),f=P(""),R=P(""),M=i=>({first_name:i.first_name??null,middle_name:i.middle_name??null,last_name:i.last_name??null,email:i.email,phone_number:i.phone_number??null,date_of_birth:i.date_of_birth,country_id:i.country_id??null,gender_id:i.gender_id??null,size_id:i.size_id??null,age_category_id:i.age_category_id??null});return{isLoading:U,okMsg:f,errMsg:R,submit:async(i,x)=>{f.value="",R.value="",U.value=!0;try{if(i==="volunteer"){const c=M(x);return f.value=`Registered as Volunteer (${c.email})`,{personal:c}}else{const c={personal:M(x),runner:{event_id:x.event_id,stage_id:x.stage_id}};return f.value=`Registered as Runner (${c.personal.email})`,c}}catch(c){throw R.value=c?.data?.statusMessage||c?.message||"Registration failed",c}finally{U.value=!1}}}}),we={class:"max-w-4xl mx-auto p-6 space-y-8"},ze={class:"bg-white rounded-3xl border border-gray-200 shadow-sm hover:shadow-md transition-shadow duration-200 overflow-hidden"},Ve={class:"bg-gradient-to-r from-gray-50 to-gray-100 px-8 py-6 border-b border-gray-200"},ke={class:"flex items-center gap-3"},Ce={class:"flex items-center justify-center w-10 h-10 rounded-full bg-blue-100 text-blue-600"},Ue={class:"text-xl font-semibold text-gray-900"},Re={class:"p-8 space-y-6"},$e={class:"grid grid-cols-1 md:grid-cols-3 gap-6"},Le={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Me={class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Ee={class:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6"},Fe={key:0,class:"grid grid-cols-1 md:grid-cols-2 gap-6"},Pe={class:"bg-white rounded-3xl border border-gray-200 shadow-sm p-8"},Ae={class:"flex flex-col sm:flex-row items-center justify-between gap-6"},Ne={class:"text-center sm:text-left"},Te={class:"text-gray-600 text-sm"},Be={key:1},Ie={key:2},Oe={key:0,class:"mt-6 pt-6 border-t border-gray-200"},De={key:0,class:"flex items-center gap-2 text-green-600 bg-green-50 p-4 rounded-xl border border-green-200"},je={class:"font-medium"},Xe={key:1,class:"flex items-center gap-2 text-red-600 bg-red-50 p-4 rounded-xl border border-red-200"},Ye={class:"font-medium"},lt=re({__name:"RegistrationForm",props:{mode:{}},setup(U){const f=U,R=ie(),{countries:M,genders:B,age_categories:i}=T(R),x=me(),{events:c}=T(x),I=Se(),{isLoading:E,okMsg:A,errMsg:N}=T(I),F=P(null),X=[{id:"xs",name:"XS"},{id:"s",name:"S"},{id:"m",name:"M"},{id:"l",name:"L"},{id:"xl",name:"XL"}],Y=O(()=>(c.value||[]).map(v=>({id:String(v.id),name:v.name}))),G=O(()=>{const v=F.value?.values?.event_id,l=(c.value||[]).find(y=>String(y.id)===String(v));return(l?.stages??l?.data?.stages??[]).map(y=>({id:String(y.id),name:y.name}))}),J={first_name:"",middle_name:"",last_name:"",email:"",phone_number:"",country_id:"",gender_id:"",size_id:"",age_category_id:"",date_of_birth:"",event_id:"",stage_id:""},q=async v=>{const l=await I.submit(f.mode,v);console.log(f.mode==="volunteer"?"VOLUNTEER PAYLOAD":"RUNNER PAYLOAD",l)};return(v,l)=>{const m=K,y=Q,b=ee,h=Z,S=ae,w=te,z=W,H=se;return d(),u("section",we,[e(t(le),{ref_key:"form",ref:F,class:"space-y-8","initial-values":J,"validation-schema":t(ue),onSubmit:q},{default:a(()=>[o("div",ze,[o("div",Ve,[o("div",ke,[o("div",Ce,[e(t(D),{size:20})]),o("div",null,[o("h2",Ue,p(f.mode==="volunteer"?"Volunteer Information":"Runner Information"),1),l[0]||(l[0]=o("p",{class:"text-sm text-gray-600"},"Tell us about yourself",-1))])])]),o("div",Re,[o("div",$e,[e(t(_),{name:"first_name",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"first_name",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(D),{size:16,class:"text-gray-400"}),l[1]||(l[1]=r(" First name ",-1))]),_:1}),e(y,L({id:"first_name"},n,{placeholder:"Enter your first name",autocomplete:"given-name",class:"h-12 text-base"}),null,16),e(t(g),{name:"first_name"})]),_:1}),e(t(_),{name:"middle_name",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"middle_name",class:"text-sm font-medium text-gray-700"},{default:a(()=>[...l[2]||(l[2]=[r(" Middle name ",-1),o("span",{class:"text-gray-400 text-xs"},"(optional)",-1)])]),_:1}),e(y,L({id:"middle_name"},n,{placeholder:"Middle name",class:"h-12 text-base"}),null,16),e(t(g),{name:"middle_name"})]),_:1}),e(t(_),{name:"last_name",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"last_name",class:"text-sm font-medium text-gray-700"},{default:a(()=>[...l[3]||(l[3]=[r(" Last name ",-1)])]),_:1}),e(y,L({id:"last_name"},n,{placeholder:"Enter your last name",autocomplete:"family-name",class:"h-12 text-base"}),null,16),e(t(g),{name:"last_name"})]),_:1})]),o("div",Le,[e(t(_),{name:"email",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"email",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(ce),{size:16,class:"text-gray-400"}),l[4]||(l[4]=r(" Email address ",-1))]),_:1}),e(y,L({id:"email",type:"email"},n,{placeholder:"your.email@example.com",autocomplete:"email",class:"h-12 text-base"}),null,16),e(t(g),{name:"email"})]),_:1}),e(t(_),{name:"phone_number",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"phone_number",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(_e),{size:16,class:"text-gray-400"}),l[5]||(l[5]=r(" Phone number ",-1))]),_:1}),e(y,L({id:"phone_number",type:"tel"},n,{placeholder:"xxxxxxxxxx",autocomplete:"tel",class:"h-12 text-base"}),null,16),e(t(g),{name:"phone_number"})]),_:1})]),o("div",Me,[e(t(_),{name:"date_of_birth",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"date_of_birth",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(fe),{size:16,class:"text-gray-400"}),l[6]||(l[6]=r(" Date of birth ",-1))]),_:1}),e(ne,{Label:"Select your birth date","model-value":n.value?t(oe)(n.value):void 0,"onUpdate:modelValue":s=>n.onChange(s?s.toString():"")},null,8,["model-value","onUpdate:modelValue"]),e(t(g),{name:"date_of_birth"})]),_:1})]),o("div",Ee,[e(t(_),{name:"country_id",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"country_id",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(pe),{size:16,class:"text-gray-400"}),l[7]||(l[7]=r(" Country ",-1))]),_:1}),e(z,{id:"country_id","model-value":String(n.value??""),"onUpdate:modelValue":s=>n.onChange(s)},{default:a(()=>[e(h,{class:"w-full h-12"},{default:a(()=>[e(b,{placeholder:"Select country"})]),_:1}),e(w,null,{default:a(()=>[(d(!0),u(V,null,k(t(M),s=>(d(),C(S,{key:s.id,value:String(s.id)},{default:a(()=>[r(p(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"]),e(t(g),{name:"country_id"})]),_:1}),e(t(_),{name:"gender_id",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"gender_id",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(j),{size:16,class:"text-gray-400"}),l[8]||(l[8]=r(" Gender ",-1))]),_:1}),e(z,{id:"gender_id","model-value":String(n.value??""),"onUpdate:modelValue":s=>n.onChange(s)},{default:a(()=>[e(h,{class:"w-full h-12"},{default:a(()=>[e(b,{placeholder:"Select gender"})]),_:1}),e(w,null,{default:a(()=>[(d(!0),u(V,null,k(t(B),s=>(d(),C(S,{key:s.id,value:String(s.id)},{default:a(()=>[r(p(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"]),e(t(g),{name:"gender_id"})]),_:1}),e(t(_),{name:"size_id",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"size_id",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(ye),{size:16,class:"text-gray-400"}),l[9]||(l[9]=r(" Shirt size ",-1))]),_:1}),e(z,{id:"size_id","model-value":String(n.value??""),"onUpdate:modelValue":s=>n.onChange(s)},{default:a(()=>[e(h,{class:"w-full h-12"},{default:a(()=>[e(b,{placeholder:"Size"})]),_:1}),e(w,null,{default:a(()=>[(d(),u(V,null,k(X,s=>e(S,{key:s.id,value:String(s.id)},{default:a(()=>[r(p(s.name),1)]),_:2},1032,["value"])),64))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"]),e(t(g),{name:"size_id"})]),_:1}),e(t(_),{name:"age_category_id",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"age_category_id",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(j),{size:16,class:"text-gray-400"}),l[10]||(l[10]=r(" Age group ",-1))]),_:1}),e(z,{id:"age_category_id","model-value":String(n.value??""),"onUpdate:modelValue":s=>n.onChange(s)},{default:a(()=>[e(h,{class:"w-full h-12"},{default:a(()=>[e(b,{placeholder:"Age group"})]),_:1}),e(w,null,{default:a(()=>[(d(!0),u(V,null,k(t(i),s=>(d(),C(S,{key:s.id,value:String(s.id)},{default:a(()=>[r(p(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"]),e(t(g),{name:"age_category_id"})]),_:1})]),f.mode==="runner"?(d(),u("div",Fe,[e(t(_),{name:"event_id",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"event_id",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(ge),{size:16,class:"text-gray-400"}),l[11]||(l[11]=r(" Event ",-1))]),_:1}),e(z,{id:"event_id","model-value":String(n.value??""),"onUpdate:modelValue":s=>n.onChange(s)},{default:a(()=>[e(h,{class:"w-full h-12"},{default:a(()=>[e(b,{placeholder:"Choose your event"})]),_:1}),e(w,null,{default:a(()=>[(d(!0),u(V,null,k(Y.value,s=>(d(),C(S,{key:s.id,value:String(s.id)},{default:a(()=>[r(p(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["model-value","onUpdate:modelValue"]),e(t(g),{name:"event_id"})]),_:1}),e(t(_),{name:"stage_id",as:"div",class:"space-y-2"},{default:a(({field:n})=>[e(m,{for:"stage_id",class:"text-sm font-medium text-gray-700 flex items-center gap-2"},{default:a(()=>[e(t(ve),{size:16,class:"text-gray-400"}),l[12]||(l[12]=r(" Stage ",-1))]),_:1}),e(z,{id:"stage_id",disabled:!F.value?.values?.event_id,"model-value":String(n.value??""),"onUpdate:modelValue":s=>n.onChange(s)},{default:a(()=>[e(h,{class:"w-full h-12 disabled:opacity-50 disabled:cursor-not-allowed"},{default:a(()=>[e(b,{placeholder:F.value?.values?.event_id?"Choose your stage":"Select an event first"},null,8,["placeholder"])]),_:1}),e(w,null,{default:a(()=>[(d(!0),u(V,null,k(G.value,s=>(d(),C(S,{key:s.id,value:String(s.id)},{default:a(()=>[r(p(s.name),1)]),_:2},1032,["value"]))),128))]),_:1})]),_:2},1032,["disabled","model-value","onUpdate:modelValue"]),e(t(g),{name:"stage_id"})]),_:1})])):$("",!0)])]),o("div",Pe,[o("div",Ae,[o("div",Ne,[l[13]||(l[13]=o("h3",{class:"text-lg font-semibold text-gray-900 mb-2"},"Ready to register?",-1)),o("p",Te,p(f.mode==="volunteer"?"Complete your volunteer registration and join our team!":"Submit your registration and get ready for the race!"),1)]),e(H,{variant:"default",type:"submit",class:"w-full sm:w-auto px-8 py-3 h-12 text-base font-medium",disabled:t(E),"aria-busy":t(E)},{default:a(()=>[t(E)?(d(),C(t(xe),{key:0,size:20,class:"animate-spin mr-2"})):$("",!0),t(E)?(d(),u("span",Ie,"Processing Registration...")):(d(),u("span",Be,p(f.mode==="volunteer"?"Register as Volunteer":"Register as Runner"),1))]),_:1},8,["disabled","aria-busy"])]),t(A)||t(N)?(d(),u("div",Oe,[t(A)?(d(),u("div",De,[e(t(be),{size:20}),o("span",je,p(t(A)),1)])):$("",!0),t(N)?(d(),u("div",Xe,[e(t(he),{size:20}),o("span",Ye,p(t(N)),1)])):$("",!0)])):$("",!0)])]),_:1},8,["validation-schema"])])}}});export{lt as _};

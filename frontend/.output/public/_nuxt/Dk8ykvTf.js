import{_ as ee}from"./DiU-Texi.js";import{u as te,_ as se}from"./C5kvzf0a.js";import{_ as ae,a as ne,b as oe,c as le,d as re,e as _e}from"./yBBdB1dc.js";import{_ as ie,a as me,b as ue,c as pe}from"./0kkk6ril.js";import{_ as ce}from"./CJQ92kjL.js";import{_ as fe}from"./BpDApRAD.js";import{e as A,E as de,c as f,o as _,b as e,a as p,w as t,g as a,i as ge,d as o,t as u,f as k,h as v,$ as ve,r as D,a7 as $e,p as xe,V as be,a8 as we,a9 as ke,s as Ce,q as ye,F as w,m as De,x as T}from"./qg68g3Ym.js";import{_ as Se,a as he,b as Me,c as Te}from"./AWbCc7WW.js";import{_ as Ue,a as Ae,b as Pe,c as Be,d as Fe,e as Ie,f as Ne,g as Ve,h as Ee}from"./C_yd9D7g.js";import{_ as je,a as Le,b as Re,c as qe}from"./BKX4WK3S.js";import{a as He,F as ze}from"./DJ8eIciF.js";import{_ as Oe}from"./Lu1YpVho.js";import{u as Ge}from"./p0r3EQlb.js";import{S as Je,E as Ke}from"./BjmBWiYe.js";import{S as Qe}from"./DwKVqm2R.js";import{S as We}from"./BJeMti_V.js";import"./CPYLdFy8.js";import"./CZ-43qDQ.js";import"./K4mxSTIr.js";import"./BDnat4bi.js";import"./MuqVyNMF.js";import"./DBGsIv44.js";import"./C6Y-ieo6.js";import"./CeVFgQ6p.js";import"./CVDjTR8R.js";import"./ymUjhs8s.js";import"./Cbfs0QR5.js";import"./CHnIA0z0.js";import"./CXAladg1.js";import"./B6XzT2dZ.js";import"./Bjp2U9BR.js";import"./BfZAl00a.js";import"./CQ3lKrei.js";import"./B7XZuiwR.js";const Xe={class:"flex items-center gap-2"},Ye={class:"flex-grow"},Ze={class:"not-italic block"},et=A({__name:"UserInfo",props:{user:{}},setup(d){const c=d,i=de(()=>[c.user?.personal?.first_name,c.user?.personal?.middle_name,c.user?.personal?.last_name].join(" ").trim());return(n,g)=>{const r=me,l=ue,S=ie,s=ce,C=fe;return _(),f("div",Xe,[e(S,{class:"w-[60px] h-[60px]"},{default:t(()=>[e(r,{src:a(ge)(n.user?.personal?.avatar?.file_name),class:"object-cover"},null,8,["src"]),e(l,null,{default:t(()=>[o(u(a(pe)(a(i))),1)]),_:1})]),_:1}),p("div",Ye,[e(s,{to:`/dashboard/users?id=${n.user.id}`,class:"hover:underline"},{default:t(()=>[o(u(a(i)),1)]),_:1},8,["to"]),p("em",Ze,u(n.user.personal?.email),1),n.user.role?(_(),k(C,{key:0,variant:"secondary"},{default:t(()=>[o(u(n.user?.role?.name),1)]),_:1})):v("",!0)])])}}}),U=ve("users",()=>{const d=D([]),{isLoading:c,params:i}=$e(),{axios:n}=xe(),g=async()=>{const{data:{data:r,...l}}=await n.get("/users",{params:i.value});d.value=r,i.value=l,d.value=r};return be(i,(r,l)=>{we(r,l)||g()}),{users:d,isLoading:c,params:i,fetch:g}}),tt={class:"flex gap-4 mb-20"},st={class:"flex-grow"},at={class:"flex gap-2 mb-4"},nt={key:0,class:"flex items-center justify-end space-x-2 py-4"},ot={class:"flex-1 text-sm text-muted-foreground"},lt={class:"space-x-2"},rt={key:0},qt=A({__name:"index",setup(d){Ge({title:"Contacts"});const{public:{mailAdmin:c}}=ke(),{users:i,params:n}=Ce(U()),{fetch:g}=U();te();const r=D(!1),l=D(null);return ye(()=>{g()}),(S,s)=>{const C=ee,h=se,$=le,M=oe,P=ne,x=_e,B=et,F=he,I=Pe,N=Be,V=Te,E=Ae,j=Me,L=Se,R=re,q=ae,H=Ie,z=Ne,O=Ve,G=Ee,J=Fe,K=Ue,Q=Re,W=qe,X=Le,Y=je;return _(),f(w,null,[p("div",tt,[p("div",st,[p("div",at,[e(a(Je)),s[3]||(s[3]=o(" Filters ",-1))])]),e(a(ze),{class:"max-w-[320px] w-full flex items-center gap-2"},{default:t(()=>[e(a(He),{name:"search"},{default:t(({field:m})=>[e(C,De(m,{placeholder:"Search users"}),null,16)]),_:1}),e(h,{variant:"secondary",size:"lg"},{default:t(()=>[e(a(Qe))]),_:1})]),_:1})]),e(q,null,{default:t(()=>[e(P,null,{default:t(()=>[e(M,null,{default:t(()=>[e($,null,{default:t(()=>[...s[4]||(s[4]=[o("SN",-1)])]),_:1}),e($,null,{default:t(()=>[...s[5]||(s[5]=[o("User",-1)])]),_:1}),e($,null,{default:t(()=>[...s[6]||(s[6]=[o("Status",-1)])]),_:1}),e($,{class:"text-right"},{default:t(()=>[...s[7]||(s[7]=[o("Action",-1)])]),_:1})]),_:1})]),_:1}),e(R,null,{default:t(()=>[(_(!0),f(w,null,T(a(i),(m,y)=>(_(),k(M,null,{default:t(()=>[e(x,null,{default:t(()=>[o(u(y+1),1)]),_:2},1024),e(x,null,{default:t(()=>[e(B,{user:m},null,8,["user"])]),_:2},1024),e(x),e(x,{class:"text-right"},{default:t(()=>[m.personal.email!=a(c)?(_(),k(L,{key:0},{default:t(()=>[e(F,{"as-child":""},{default:t(()=>[e(h,{variant:"outline"},{default:t(()=>[e(a(Ke))]),_:1})]),_:1}),e(j,{class:"w-56"},{default:t(()=>[e(E,null,{default:t(()=>[e(I,null,{default:t(()=>[...s[8]||(s[8]=[o("Actions",-1)])]),_:1}),e(N),e(V,{onClick:()=>{r.value=!0,l.value=m}},{default:t(()=>[e(a(We)),s[9]||(s[9]=p("span",null,"Change role",-1))]),_:2},1032,["onClick"])]),_:2},1024)]),_:2},1024)]),_:2},1024)):v("",!0)]),_:2},1024)]),_:2},1024))),256))]),_:1})]),_:1}),a(n).total_page>1?(_(),f("div",nt,[p("div",ot,u(a(n)?.current)+" of "+u(a(n)?.total_page)+" pages ",1),p("div",lt,[e(K,{"items-per-page":a(n).per_page,total:a(n).total,"default-page":a(n).current,"onUpdate:page":s[0]||(s[0]=m=>{n.value={...a(n),current:m}})},{default:t(({page:m})=>[e(J,null,{default:t(({items:y})=>[e(H),(_(!0),f(w,null,T(y,(b,Z)=>(_(),f(w,{key:Z},[b.type==="page"?(_(),k(z,{key:0,value:b.value,"is-active":b.value===m},{default:t(()=>[o(u(b.value),1)]),_:2},1032,["value","is-active"])):v("",!0)],64))),128)),e(O,{index:4}),e(G)]),_:2},1024)]),_:1},8,["items-per-page","total","default-page"])])])):v("",!0),e(Y,{open:a(r),"onUpdate:open":s[2]||(s[2]=()=>{r.value=!1,l.value=null})},{default:t(()=>[e(X,{class:"bg-white"},{default:t(()=>[e(Q,null,{default:t(()=>[s[10]||(s[10]=o(" Update ",-1)),a(l)?.personal?.first_name?(_(),f("span",rt,u(a(l)?.personal?.first_name)+"'s",1)):v("",!0),s[11]||(s[11]=o(" role ",-1))]),_:1}),e(W,null,{default:t(()=>[...s[12]||(s[12]=[o("Change role of users",-1)])]),_:1}),e(Oe,{user:a(l),onUpdate:s[1]||(s[1]=()=>{r.value=!1,l.value=null,a(g)()})},null,8,["user"])]),_:1})]),_:1},8,["open"])],64)}}});export{qt as default};
